<html>
  <head>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
  <script src="http://timelyportfolio.github.io/rCharts_dimple/js/d3-grid.js"></script>
  <script src="js/colorpicker.js"></script>
  <script src="js/chroma.js"></script>
  <script src="js/color-scheme.min.js"></script>
  </head>
  <body>
    <a href="https://github.com/timelyportfolio/rCharts_colors">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/>
    </a>
    <div class="container">
      <div class="page-header">
        <h1>
          rCharts + dimple Color Picker
          <small>
            built with 
            <a href="http://shiny.rstudio.com/articles/html-tags.html" target="_blank"> Shiny Tags </a>
          </small>
        </h1>
      </div>
      <div id="color_row" class="row">
        <div class="col-md-3">
          <div id="picker" class="col-md-10" style="height:200px"></div>
          <div id="slide" class="col-md-2" style="height:200px"></div>
        </div>
        <div class="col-md-2">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>
                <a href="http://brianhann.com/color-scheme-js/" target="_blank">color-scheme.js</a>
              </h4>
            </div>
            <div class="panel-body">
              <div class="btn-group-vertical">
                <div class="btn-group">
                  <button type="button" id="scheme_selection" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Monochromatic
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" id="scheme_buttons">
                    <li>
                      <a href="#">Monochromatic</a>
                    </li>
                    <li>
                      <a href="#">Contrast</a>
                    </li>
                    <li>
                      <a href="#">Triade</a>
                    </li>
                    <li>
                      <a href="#">Tetrade</a>
                    </li>
                    <li>
                      <a href="#">Analogic</a>
                    </li>
                  </ul>
                </div>
                <div class="btn-group">
                  <button type="button" id="variation_selection" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Default
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" id="variation_buttons">
                    <li>
                      <a href="#">Default</a>
                    </li>
                    <li>
                      <a href="#">Pastel</a>
                    </li>
                    <li>
                      <a href="#">Soft</a>
                    </li>
                    <li>
                      <a href="#">Light</a>
                    </li>
                    <li>
                      <a href="#">Hard</a>
                    </li>
                    <li>
                      <a href="#">Pale</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-2">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>
                <a href="https://vis4.net/blog/posts/mastering-multi-hued-color-scales" target="_blank">chroma.js</a>
              </h4>
            </div>
            <div class="panel-body">
              <label>
                Steps
                <input id="steps" checked="checked" type="number" value="9" style="width: 40px;"/>
              </label>
              <div class="checkbox">
                <label>
                  <input id="bez" type="checkbox"/>
                  Bezier
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input id="coL" type="checkbox"/>
                  Lightness
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-5" id="palette"></div>
      </div>
      <div id="chart_row" class="row">
        <div class="col-md-3">
          Select a color with the color picker above and then create
             a palette with some nice javascript color libraries.
          <hr/>
          This site was created entirely in R with rCharts, magrittr, and shiny based on
            an
          <a href="https://github.com/danielkrizian/rChartsDygraphs/issues/11" target="_blank">idea from Ramnath Vaidyanathan.</a>
           On the Javascript side of the world, we used 
          <ul class="nav nav-pills nav-stacked">
            <li>
              <a href="http://www.daviddurman.com/flexi-color-picker/" target="_blank">
                <span class="badge">1</span>
                flexi-color-picker
              </a>
            </li>
            <li>
              <a href="https://vis4.net/blog/posts/mastering-multi-hued-color-scales" target="_blank">
                <span class="badge">2</span>
                chroma.js
              </a>
            </li>
            <li>
              <a href="http://brianhann.com/color-scheme-js/" target="_blank">
                <span class="badge">3</span>
                color-scheme.js
              </a>
            </li>
            <li>
              <a href="http://dimplejs.org/" target="_blank">
                <span class="badge">4</span>
                dimple.js
              </a>
            </li>
            <li>
              <a href="http://dimplejs.org/" target="_blank">
                <span class="badge">5</span>
                dimple.js
              </a>
            </li>
            <li>
              <a href="http://getbootstrap.com/" target="_blank">
                <span class="badge">6</span>
                bootstrap
              </a>
            </li>
          </ul>
        </div>
        <div class="col-md-9">
<div id = 'chart1ffc7dcf523b' class = 'rChart dimple'></div>
<script>
var chart1ffc7dcf523b = (function() {
  var opts = {
 "dom": "chart1ffc7dcf523b",
"width":    900,
"height":    500,
"xAxis": {
 "type": "addCategoryAxis",
"showPercent": false,
"orderRule": ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'] 
},
"yAxis": {
 "type": "addMeasureAxis",
"showPercent": false 
},
"zAxis": [],
"colorAxis": [],
"defaultColors": [],
"layers": [],
"legend": [],
"x": "x",
"y": "y",
"groups": "grp",
"type": "bar",
"id": "chart1ffc7dcf523b" 
},
    data = [{"x":"May","y":6294.10612070933,"grp":"A"},{"x":"Oct","y":5245.44463283382,"grp":"A"},{"x":"May","y":3824.73183283582,"grp":"A"},{"x":"Dec","y":2909.04059074819,"grp":"A"},{"x":"Feb","y":2267.0397751499,"grp":"A"},{"x":"Nov","y":1193.55774321593,"grp":"A"},{"x":"Dec","y":7594.74611678161,"grp":"A"},{"x":"Mar","y":2084.08193127252,"grp":"A"},{"x":"Jun","y":9054.97658532113,"grp":"A"},{"x":"Feb","y":9561.9878184516,"grp":"A"},{"x":"Aug","y":7730.61345843598,"grp":"A"},{"x":"Jun","y":9900.61800787225,"grp":"A"},{"x":"Oct","y":8803.63882123493,"grp":"A"},{"x":"Mar","y":5279.08291807398,"grp":"A"},{"x":"Dec","y":3756.96727004834,"grp":"A"},{"x":"Aug","y":1924.45872537792,"grp":"A"},{"x":"Nov","y":1839.92514689453,"grp":"A"},{"x":"Jul","y":9850.36567156203,"grp":"A"},{"x":"May","y":4201.96314225905,"grp":"A"},{"x":"Apr","y":4851.27692320384,"grp":"A"},{"x":"Oct","y":6733.79915254191,"grp":"A"},{"x":"Feb","y":4001.89493177459,"grp":"A"},{"x":"Dec","y":9844.6103152819,"grp":"A"},{"x":"Jan","y":3362.61090682819,"grp":"A"},{"x":"Feb","y":1343.63879985176,"grp":"A"},{"x":"Aug","y":2725.95256334171,"grp":"A"},{"x":"Apr","y":4731.39535658993,"grp":"A"},{"x":"Apr","y":1093.12606439926,"grp":"A"},{"x":"Jun","y":4097.66685077921,"grp":"A"},{"x":"Aug","y":2266.87555899844,"grp":"A"},{"x":"Jul","y":4299.42946718074,"grp":"A"},{"x":"May","y":9090.9559361171,"grp":"A"},{"x":"Apr","y":4382.95448687859,"grp":"A"},{"x":"Apr","y":1859.8283175379,"grp":"A"},{"x":"Sep","y":8588.2772395853,"grp":"A"},{"x":"Jan","y":1935.11248892173,"grp":"A"},{"x":"Jul","y":3615.93651887961,"grp":"A"},{"x":"Aug","y":6291.9910941273,"grp":"A"},{"x":"Jun","y":1326.81269291788,"grp":"A"},{"x":"Nov","y":2147.45763316751,"grp":"A"},{"x":"Feb","y":7890.72482008487,"grp":"A"},{"x":"Jun","y":9434.75938588381,"grp":"A"},{"x":"May","y":8439.95694210753,"grp":"A"},{"x":"Feb","y":3271.53699845076,"grp":"A"},{"x":"Jun","y":7687.18633404933,"grp":"A"},{"x":"Feb","y":4236.7667844519,"grp":"A"},{"x":"Jun","y":5440.18108956516,"grp":"A"},{"x":"Nov","y":2059.0221635066,"grp":"A"},{"x":"Oct","y":6129.02485416271,"grp":"A"},{"x":"May","y":8941.63004704751,"grp":"A"},{"x":"May","y":5904.56614154391,"grp":"A"},{"x":"Jan","y":8982.25121200085,"grp":"A"},{"x":"Nov","y":1488.85567043908,"grp":"A"},{"x":"Jul","y":3468.23693905026,"grp":"A"},{"x":"Oct","y":5938.99749731645,"grp":"A"},{"x":"Feb","y":5450.54074889049,"grp":"A"},{"x":"Mar","y":5139.63297288865,"grp":"A"},{"x":"Aug","y":6836.50303957984,"grp":"A"},{"x":"Apr","y":9384.91564220749,"grp":"A"},{"x":"Mar","y":1145.28484991752,"grp":"A"},{"x":"Jul","y":6576.78081165068,"grp":"A"},{"x":"Jan","y":5393.34124396555,"grp":"A"},{"x":"May","y":6217.72907068953,"grp":"A"},{"x":"Oct","y":7665.48403608613,"grp":"A"},{"x":"Oct","y":3955.41402022354,"grp":"A"},{"x":"Dec","y":4456.74823014997,"grp":"A"},{"x":"Nov","y":3338.65887671709,"grp":"A"},{"x":"Nov","y":5068.21453315206,"grp":"A"},{"x":"Sep","y":1136.23825553805,"grp":"A"},{"x":"Feb","y":1291.17610747926,"grp":"A"},{"x":"Jun","y":8956.5116551239,"grp":"A"},{"x":"Jul","y":1385.7431949582,"grp":"A"},{"x":"Mar","y":7975.19607911818,"grp":"A"},{"x":"Jan","y":2427.4704286363,"grp":"A"},{"x":"Feb","y":6274.11093562841,"grp":"A"},{"x":"Oct","y":6186.41383200884,"grp":"A"},{"x":"Oct","y":3887.95036147349,"grp":"A"},{"x":"Oct","y":5478.97681430914,"grp":"A"},{"x":"Jun","y":9469.06606503762,"grp":"A"},{"x":"Sep","y":9780.12023726478,"grp":"A"},{"x":"May","y":7300.50229141489,"grp":"A"},{"x":"Oct","y":5712.4907001853,"grp":"A"},{"x":"Nov","y":5480.19713140093,"grp":"A"},{"x":"Feb","y":4007.77786271647,"grp":"A"},{"x":"Nov","y":1295.10812740773,"grp":"A"},{"x":"Oct","y":7761.59610738978,"grp":"A"},{"x":"May","y":2631.35162135586,"grp":"A"},{"x":"Feb","y":7281.63770982064,"grp":"A"},{"x":"Aug","y":6870.72091246955,"grp":"A"},{"x":"Apr","y":5743.80255886354,"grp":"A"},{"x":"Aug","y":3323.5957249999,"grp":"A"},{"x":"Feb","y":9804.01528719813,"grp":"A"},{"x":"Oct","y":1087.82162936404,"grp":"A"},{"x":"Feb","y":9249.11726685241,"grp":"A"},{"x":"Jun","y":5677.07075551152,"grp":"A"},{"x":"Feb","y":1078.7443886511,"grp":"A"},{"x":"Jun","y":9048.75407833606,"grp":"A"},{"x":"Oct","y":7203.14734731801,"grp":"A"},{"x":"Feb","y":7890.49940556288,"grp":"A"},{"x":"Mar","y":9764.24433221109,"grp":"A"},{"x":"Sep","y":1659.28405057639,"grp":"A"},{"x":"Nov","y":8733.55563962832,"grp":"A"},{"x":"May","y":4363.79777290858,"grp":"A"},{"x":"Feb","y":5368.19651722908,"grp":"A"},{"x":"Oct","y":1926.94152472541,"grp":"A"},{"x":"Dec","y":6368.71909862384,"grp":"A"},{"x":"Jun","y":9963.37701124139,"grp":"A"},{"x":"Nov","y":9428.06697683409,"grp":"A"},{"x":"Nov","y":9524.93204269558,"grp":"A"},{"x":"Dec","y":7967.74391969666,"grp":"A"},{"x":"Dec","y":4832.84628740512,"grp":"A"},{"x":"Mar","y":6494.60901669227,"grp":"A"},{"x":"Apr","y":5685.41510147043,"grp":"A"},{"x":"Oct","y":9200.58166375384,"grp":"A"},{"x":"Jul","y":7253.07864206843,"grp":"A"},{"x":"May","y":6835.81878081895,"grp":"A"},{"x":"Jul","y":2386.0498459544,"grp":"A"},{"x":"Apr","y":8374.17521909811,"grp":"A"},{"x":"Dec","y":7335.44630743563,"grp":"A"},{"x":"Apr","y":3906.31889784709,"grp":"A"},{"x":"Oct","y":5887.32704566792,"grp":"A"},{"x":"May","y":4393.57249531895,"grp":"A"},{"x":"Oct","y":8496.57304142602,"grp":"A"},{"x":"Apr","y":2082.97510514967,"grp":"A"},{"x":"Feb","y":1448.27378727496,"grp":"A"},{"x":"May","y":3376.63553026505,"grp":"A"},{"x":"May","y":8707.20739732496,"grp":"A"},{"x":"May","y":7792.86615713499,"grp":"A"},{"x":"Jan","y":7641.41541789286,"grp":"A"},{"x":"Mar","y":3627.14911648072,"grp":"A"},{"x":"May","y":3156.24071215279,"grp":"A"},{"x":"May","y":3650.19886824302,"grp":"A"},{"x":"Jul","y":3485.80377572216,"grp":"A"},{"x":"Apr","y":2848.12849154696,"grp":"A"},{"x":"Sep","y":6855.96402082592,"grp":"A"},{"x":"Nov","y":5876.14788347855,"grp":"A"},{"x":"Mar","y":9066.25507306308,"grp":"A"},{"x":"Apr","y":1582.56162004545,"grp":"A"},{"x":"Jul","y":8718.21961924434,"grp":"A"},{"x":"Oct","y":3473.80510228686,"grp":"A"},{"x":"Nov","y":7942.42454972118,"grp":"A"},{"x":"Dec","y":7187.05624947324,"grp":"A"},{"x":"Apr","y":3520.35962371156,"grp":"A"},{"x":"May","y":7838.99938105606,"grp":"A"},{"x":"Feb","y":3325.11486113071,"grp":"A"},{"x":"Sep","y":8377.53811618313,"grp":"A"},{"x":"Oct","y":3696.61249825731,"grp":"A"},{"x":"Jun","y":8787.81033470295,"grp":"A"},{"x":"Dec","y":8294.8693393264,"grp":"A"},{"x":"Jul","y":2537.66954131424,"grp":"A"},{"x":"Jun","y":9428.24510065839,"grp":"A"},{"x":"Apr","y":3299.26206474192,"grp":"A"},{"x":"Aug","y":8437.12095241062,"grp":"A"},{"x":"Jul","y":2292.81367687508,"grp":"A"},{"x":"Feb","y":1920.5162615981,"grp":"A"},{"x":"Nov","y":9395.04876802675,"grp":"A"},{"x":"Dec","y":5121.98375887237,"grp":"A"},{"x":"Aug","y":2133.97645670921,"grp":"A"},{"x":"Feb","y":1195.7382094115,"grp":"A"},{"x":"Nov","y":3045.65991065465,"grp":"A"},{"x":"Aug","y":6522.70209463313,"grp":"A"},{"x":"Sep","y":4969.40074395388,"grp":"A"},{"x":"Nov","y":2982.66252805479,"grp":"A"},{"x":"Dec","y":9313.93783073872,"grp":"A"},{"x":"Feb","y":4279.97910790145,"grp":"A"},{"x":"Feb","y":4226.56598314643,"grp":"A"},{"x":"Jun","y":5271.60691213794,"grp":"A"},{"x":"Mar","y":9229.88225752488,"grp":"A"},{"x":"Aug","y":3606.6151720006,"grp":"A"},{"x":"Apr","y":7668.43406157568,"grp":"A"},{"x":"Jun","y":4130.42184477672,"grp":"A"},{"x":"Jul","y":4790.67298467271,"grp":"A"},{"x":"May","y":9689.02898463421,"grp":"A"},{"x":"Jan","y":6614.31102198549,"grp":"A"},{"x":"Aug","y":5951.68681442738,"grp":"A"},{"x":"May","y":8764.89536184818,"grp":"A"},{"x":"Sep","y":3959.01637361385,"grp":"A"},{"x":"Apr","y":2077.70550530404,"grp":"A"},{"x":"Oct","y":5427.80389357358,"grp":"A"},{"x":"Aug","y":5123.8301161211,"grp":"A"},{"x":"Nov","y":1282.91832772084,"grp":"A"},{"x":"Jun","y":6625.21115900017,"grp":"A"},{"x":"Jul","y":8148.60591478646,"grp":"A"},{"x":"Jul","y":5802.63358866796,"grp":"A"},{"x":"Jul","y":3925.045653712,"grp":"A"},{"x":"Jun","y":5175.20320718177,"grp":"A"},{"x":"Jul","y":5562.28737044148,"grp":"A"},{"x":"May","y":3295.22778140381,"grp":"A"},{"x":"Feb","y":2687.9921706859,"grp":"A"},{"x":"Feb","y":4945.05587709136,"grp":"A"},{"x":"Mar","y":9434.89352357574,"grp":"A"},{"x":"Mar","y":2315.58246305212,"grp":"A"},{"x":"Apr","y":1639.55517951399,"grp":"A"},{"x":"Aug","y":2673.71287569404,"grp":"A"},{"x":"Oct","y":1577.98313954845,"grp":"A"},{"x":"Sep","y":7679.59473119117,"grp":"A"},{"x":"Apr","y":6158.9547151234,"grp":"A"},{"x":"Dec","y":4784.78107252158,"grp":"A"},{"x":"Jun","y":2808.80043422803,"grp":"A"},{"x":"Aug","y":2375.38417172618,"grp":"A"},{"x":"Apr","y":8334.51784937643,"grp":"B"},{"x":"Feb","y":7984.84918591566,"grp":"B"},{"x":"Oct","y":3822.0285307616,"grp":"B"},{"x":"Feb","y":1413.09842444025,"grp":"B"},{"x":"Feb","y":5170.36212794483,"grp":"B"},{"x":"Jul","y":9329.59967665374,"grp":"B"},{"x":"Nov","y":9252.18699849211,"grp":"B"},{"x":"Jul","y":7670.22505425848,"grp":"B"},{"x":"Aug","y":7342.70580252633,"grp":"B"},{"x":"Apr","y":9520.98426478915,"grp":"B"},{"x":"Sep","y":7528.07216113433,"grp":"B"},{"x":"Jul","y":3701.63611858152,"grp":"B"},{"x":"Jul","y":6672.47931775637,"grp":"B"},{"x":"Mar","y":3837.61941129342,"grp":"B"},{"x":"Oct","y":2063.79216420464,"grp":"B"},{"x":"May","y":8868.67799982429,"grp":"B"},{"x":"Dec","y":5308.66420711391,"grp":"B"},{"x":"Sep","y":7729.63982704096,"grp":"B"},{"x":"Apr","y":9172.69339552149,"grp":"B"},{"x":"Nov","y":5637.92536710389,"grp":"B"},{"x":"Nov","y":8760.08461671881,"grp":"B"},{"x":"Jul","y":3164.71113241278,"grp":"B"},{"x":"Nov","y":2009.86598944291,"grp":"B"},{"x":"Aug","y":1955.72056504898,"grp":"B"},{"x":"Oct","y":1632.97524303198,"grp":"B"},{"x":"Mar","y":2576.34927937761,"grp":"B"},{"x":"Sep","y":3015.1451646816,"grp":"B"},{"x":"Nov","y":6116.22436158359,"grp":"B"},{"x":"Jan","y":5741.53025425039,"grp":"B"},{"x":"Aug","y":8109.69492420554,"grp":"B"},{"x":"Mar","y":2103.37886819616,"grp":"B"},{"x":"Oct","y":9180.58454245329,"grp":"B"},{"x":"Aug","y":5521.56665362418,"grp":"B"},{"x":"Apr","y":5029.72438116558,"grp":"B"},{"x":"Oct","y":1278.78650627099,"grp":"B"},{"x":"Feb","y":7965.69669852033,"grp":"B"},{"x":"Jul","y":5311.22503988445,"grp":"B"},{"x":"Apr","y":1797.91940469295,"grp":"B"},{"x":"Mar","y":5637.08621496335,"grp":"B"},{"x":"Nov","y":9231.1564933043,"grp":"B"},{"x":"Feb","y":6569.42804064602,"grp":"B"},{"x":"Mar","y":9816.34679134004,"grp":"B"},{"x":"Apr","y":9468.50547497161,"grp":"B"},{"x":"Feb","y":3646.42920577899,"grp":"B"},{"x":"Mar","y":6825.55444468744,"grp":"B"},{"x":"Dec","y":9510.63481881283,"grp":"B"},{"x":"Mar","y":3866.67143553495,"grp":"B"},{"x":"Aug","y":5692.99330166541,"grp":"B"},{"x":"Sep","y":7796.78053106181,"grp":"B"},{"x":"Mar","y":6622.40996258333,"grp":"B"},{"x":"Aug","y":9394.73668672144,"grp":"B"},{"x":"Nov","y":3601.37518541887,"grp":"B"},{"x":"Mar","y":6886.61884935573,"grp":"B"},{"x":"May","y":3208.7636704091,"grp":"B"},{"x":"Sep","y":4345.45136685483,"grp":"B"},{"x":"Jun","y":7503.04023595527,"grp":"B"},{"x":"Jun","y":1741.48541688919,"grp":"B"},{"x":"Jul","y":3033.2560853567,"grp":"B"},{"x":"Sep","y":2418.64974750206,"grp":"B"},{"x":"Sep","y":9978.31447422504,"grp":"B"},{"x":"Nov","y":7939.45246934891,"grp":"B"},{"x":"Jan","y":9011.04485988617,"grp":"B"},{"x":"Jul","y":2169.62338751182,"grp":"B"},{"x":"Oct","y":2763.25124874711,"grp":"B"},{"x":"Jan","y":4918.80643018521,"grp":"B"},{"x":"Aug","y":6535.36814148538,"grp":"B"},{"x":"Nov","y":4134.03194514103,"grp":"B"},{"x":"Apr","y":2244.65560936369,"grp":"B"},{"x":"Jun","y":8657.3621511925,"grp":"B"},{"x":"Feb","y":9145.80296771601,"grp":"B"},{"x":"Feb","y":2414.5316388458,"grp":"B"},{"x":"Feb","y":8790.6716146972,"grp":"B"},{"x":"Oct","y":1252.35650059767,"grp":"B"},{"x":"Apr","y":4224.79257779196,"grp":"B"},{"x":"May","y":1156.16829227656,"grp":"B"},{"x":"Jun","y":8069.56213503145,"grp":"B"},{"x":"Apr","y":9765.39865019731,"grp":"B"},{"x":"Jan","y":8607.08769084886,"grp":"B"},{"x":"Sep","y":4935.11381675489,"grp":"B"},{"x":"Dec","y":9260.96198358573,"grp":"B"},{"x":"Jul","y":5964.17236118577,"grp":"B"},{"x":"Jun","y":6619.47448388673,"grp":"B"},{"x":"Aug","y":7946.01485412568,"grp":"B"},{"x":"Sep","y":2034.17632076889,"grp":"B"},{"x":"Mar","y":3954.82343132608,"grp":"B"},{"x":"Mar","y":3292.71071474068,"grp":"B"},{"x":"Jun","y":7254.45895083249,"grp":"B"},{"x":"May","y":9979.38707494177,"grp":"B"},{"x":"Aug","y":7080.04615758546,"grp":"B"},{"x":"Oct","y":6782.8323431313,"grp":"B"},{"x":"Oct","y":2498.9627066534,"grp":"B"},{"x":"Jan","y":3638.09025357477,"grp":"B"},{"x":"Nov","y":7670.70274311118,"grp":"B"},{"x":"Sep","y":3715.08133667521,"grp":"B"},{"x":"Jul","y":7912.04534959979,"grp":"B"},{"x":"Oct","y":6834.27345543168,"grp":"B"},{"x":"Sep","y":8815.37077622488,"grp":"B"},{"x":"Mar","y":5228.98512100801,"grp":"B"},{"x":"May","y":6563.42731253244,"grp":"B"},{"x":"Jul","y":6933.17050836049,"grp":"B"},{"x":"Mar","y":6313.98451863788,"grp":"B"},{"x":"Jul","y":2609.51209906489,"grp":"B"},{"x":"Jan","y":8491.03656806983,"grp":"B"},{"x":"Dec","y":5986.70284776017,"grp":"B"},{"x":"Nov","y":5499.12692001089,"grp":"B"},{"x":"Feb","y":3888.80936615169,"grp":"B"},{"x":"Mar","y":6803.77582740039,"grp":"B"},{"x":"Feb","y":2844.98319076374,"grp":"B"},{"x":"Jun","y":2759.04172076844,"grp":"B"},{"x":"Dec","y":6996.87667516992,"grp":"B"},{"x":"Oct","y":1561.23745068908,"grp":"B"},{"x":"Sep","y":2019.03638453223,"grp":"B"},{"x":"Nov","y":1755.38185797632,"grp":"B"},{"x":"Aug","y":9641.28870889544,"grp":"B"},{"x":"Aug","y":6296.01874109358,"grp":"B"},{"x":"Sep","y":1130.68879442289,"grp":"B"},{"x":"Dec","y":3648.33845663816,"grp":"B"},{"x":"Feb","y":9860.22113217041,"grp":"B"},{"x":"Nov","y":6027.77576795779,"grp":"B"},{"x":"Dec","y":1283.61664712429,"grp":"B"},{"x":"May","y":5145.64634719864,"grp":"B"},{"x":"Jul","y":6350.11560912244,"grp":"B"},{"x":"Jul","y":5017.38503784873,"grp":"B"},{"x":"Sep","y":6281.41938941553,"grp":"B"},{"x":"Apr","y":2100.02407850698,"grp":"B"},{"x":"Jul","y":6492.40721645765,"grp":"B"},{"x":"Jul","y":6255.44950622134,"grp":"B"},{"x":"Mar","y":8009.43596288562,"grp":"B"},{"x":"Sep","y":4507.48187210411,"grp":"B"},{"x":"Sep","y":3103.74629008584,"grp":"B"},{"x":"Jul","y":4168.89298870228,"grp":"B"},{"x":"Apr","y":4552.3196561262,"grp":"B"},{"x":"Apr","y":6547.60130494833,"grp":"B"},{"x":"Jan","y":2711.11796516925,"grp":"B"},{"x":"Apr","y":7350.80866375938,"grp":"B"},{"x":"Aug","y":2685.87988917716,"grp":"B"},{"x":"Jun","y":9750.88108284399,"grp":"B"},{"x":"Nov","y":5016.01902022958,"grp":"B"},{"x":"May","y":7817.22728908062,"grp":"B"},{"x":"Oct","y":5931.78987363353,"grp":"B"},{"x":"Mar","y":7088.16798287444,"grp":"B"},{"x":"Mar","y":7310.95161824487,"grp":"B"},{"x":"May","y":2069.03842673637,"grp":"B"},{"x":"Nov","y":3783.06134580635,"grp":"B"},{"x":"May","y":2976.31664155051,"grp":"B"},{"x":"Sep","y":7195.75868500397,"grp":"B"},{"x":"Apr","y":4567.31031695381,"grp":"B"},{"x":"May","y":4579.00665304624,"grp":"B"},{"x":"Jul","y":2070.41063229553,"grp":"B"},{"x":"Mar","y":3457.22590526566,"grp":"B"},{"x":"Jul","y":9366.39648512937,"grp":"B"},{"x":"Mar","y":7954.67313169502,"grp":"B"},{"x":"Apr","y":1847.97458397225,"grp":"B"},{"x":"Nov","y":7224.47541006841,"grp":"B"},{"x":"Jan","y":9679.68109436333,"grp":"B"},{"x":"May","y":2703.30457086675,"grp":"B"},{"x":"Mar","y":4160.98868218251,"grp":"B"},{"x":"Sep","y":8626.42177427188,"grp":"B"},{"x":"Aug","y":7415.28131370433,"grp":"B"},{"x":"Sep","y":2605.99298845045,"grp":"B"},{"x":"Mar","y":9461.19769802317,"grp":"B"},{"x":"Jul","y":7299.62716414593,"grp":"B"},{"x":"Apr","y":2558.90306457877,"grp":"B"},{"x":"Apr","y":6960.60895337723,"grp":"B"},{"x":"Apr","y":1421.23458068818,"grp":"B"},{"x":"Jul","y":1449.34286759235,"grp":"B"},{"x":"Aug","y":6374.40011790022,"grp":"B"},{"x":"Jul","y":7053.11142094433,"grp":"B"},{"x":"Mar","y":8697.0090623945,"grp":"B"},{"x":"Jun","y":8254.17804089375,"grp":"B"},{"x":"Mar","y":4508.00973502919,"grp":"B"},{"x":"May","y":1224.17443827726,"grp":"B"},{"x":"Sep","y":1948.91119701788,"grp":"B"},{"x":"Aug","y":4358.97619416937,"grp":"B"},{"x":"May","y":1980.34877795726,"grp":"B"},{"x":"Apr","y":3075.29082265683,"grp":"B"},{"x":"May","y":6929.72335638478,"grp":"B"},{"x":"Sep","y":2014.6859169472,"grp":"B"},{"x":"Jan","y":5037.54894644953,"grp":"B"},{"x":"Apr","y":9056.0979268048,"grp":"B"},{"x":"Mar","y":6038.20277377963,"grp":"B"},{"x":"Aug","y":1141.45226031542,"grp":"B"},{"x":"Feb","y":3646.66120009497,"grp":"B"},{"x":"Apr","y":7778.89240765944,"grp":"B"},{"x":"Nov","y":1527.8357907664,"grp":"B"},{"x":"Oct","y":1547.5517034065,"grp":"B"},{"x":"Jul","y":3050.40153441951,"grp":"B"},{"x":"Sep","y":9079.10852041096,"grp":"B"},{"x":"Aug","y":1889.50021076016,"grp":"B"},{"x":"Sep","y":2167.30059031397,"grp":"B"},{"x":"Aug","y":5471.68964426965,"grp":"B"},{"x":"Jun","y":3677.05359123647,"grp":"B"},{"x":"Aug","y":1559.66597376391,"grp":"B"},{"x":"Dec","y":9502.75781843811,"grp":"B"},{"x":"Nov","y":7240.84370373748,"grp":"B"},{"x":"Jul","y":3185.59775385074,"grp":"B"},{"x":"Jun","y":4531.1627225019,"grp":"B"},{"x":"Apr","y":7856.23684874736,"grp":"B"},{"x":"Sep","y":9916.7457933072,"grp":"B"},{"x":"Sep","y":8449.14336339571,"grp":"B"},{"x":"Aug","y":5637.13055942208,"grp":"C"},{"x":"Oct","y":9352.37868037075,"grp":"C"},{"x":"Feb","y":2519.20243375935,"grp":"C"},{"x":"Apr","y":3558.14570840448,"grp":"C"},{"x":"May","y":6135.22019120865,"grp":"C"},{"x":"Dec","y":1164.93261349387,"grp":"C"},{"x":"Feb","y":1848.92558003776,"grp":"C"},{"x":"Aug","y":7352.89638210088,"grp":"C"},{"x":"Apr","y":4870.2684759628,"grp":"C"},{"x":"Nov","y":6688.08729737066,"grp":"C"},{"x":"Nov","y":1755.2916330751,"grp":"C"},{"x":"Mar","y":6253.82513739169,"grp":"C"},{"x":"Oct","y":4359.68110803515,"grp":"C"},{"x":"Jun","y":8062.11324036121,"grp":"C"},{"x":"Mar","y":4712.76437863708,"grp":"C"},{"x":"Jun","y":7288.79397339188,"grp":"C"},{"x":"Feb","y":9744.78491628543,"grp":"C"},{"x":"Nov","y":3541.10859544016,"grp":"C"},{"x":"Dec","y":4960.31030383892,"grp":"C"},{"x":"Oct","y":8360.25984119624,"grp":"C"},{"x":"Jul","y":8754.51464718208,"grp":"C"},{"x":"Apr","y":1955.42919123545,"grp":"C"},{"x":"Oct","y":1809.41815627739,"grp":"C"},{"x":"Feb","y":4792.45071089827,"grp":"C"},{"x":"May","y":8779.44042393938,"grp":"C"},{"x":"Nov","y":7793.7971833162,"grp":"C"},{"x":"Sep","y":1234.02622970752,"grp":"C"},{"x":"Oct","y":9975.67930235527,"grp":"C"},{"x":"May","y":4462.63450966217,"grp":"C"},{"x":"Nov","y":1477.10372880101,"grp":"C"},{"x":"Sep","y":7879.40100301057,"grp":"C"},{"x":"Nov","y":9414.90546311252,"grp":"C"},{"x":"Feb","y":8720.93289997429,"grp":"C"},{"x":"May","y":7639.4916579593,"grp":"C"},{"x":"Feb","y":8927.07270127721,"grp":"C"},{"x":"Nov","y":4851.71092976816,"grp":"C"},{"x":"Aug","y":2409.1911050491,"grp":"C"},{"x":"Apr","y":7199.78937250562,"grp":"C"},{"x":"Nov","y":6353.25698927045,"grp":"C"},{"x":"Jul","y":7140.68565214984,"grp":"C"},{"x":"May","y":1636.9856253732,"grp":"C"},{"x":"Apr","y":9231.27459012903,"grp":"C"},{"x":"Jan","y":7648.58622825705,"grp":"C"},{"x":"Nov","y":8033.85132574476,"grp":"C"},{"x":"Jun","y":2089.37628916465,"grp":"C"},{"x":"Jun","y":7208.26385798864,"grp":"C"},{"x":"Aug","y":4356.33543785661,"grp":"C"},{"x":"Feb","y":3304.56762923859,"grp":"C"},{"x":"Mar","y":4927.62873321772,"grp":"C"},{"x":"Dec","y":4690.28067355976,"grp":"C"},{"x":"Aug","y":7357.82910068519,"grp":"C"},{"x":"Apr","y":5320.76608901843,"grp":"C"},{"x":"Oct","y":2771.61882724613,"grp":"C"},{"x":"Jul","y":8850.29046796262,"grp":"C"},{"x":"Oct","y":3189.92423033342,"grp":"C"},{"x":"Mar","y":8000.12524216436,"grp":"C"},{"x":"Dec","y":6480.16285267659,"grp":"C"},{"x":"Oct","y":6102.59821591899,"grp":"C"},{"x":"Apr","y":3043.22284087539,"grp":"C"},{"x":"Jun","y":2538.45388418995,"grp":"C"},{"x":"Aug","y":9268.61645281315,"grp":"C"},{"x":"Feb","y":4407.43852057494,"grp":"C"},{"x":"Aug","y":3971.82920016348,"grp":"C"},{"x":"Feb","y":1194.54217259772,"grp":"C"},{"x":"May","y":6833.07937160134,"grp":"C"},{"x":"Aug","y":6331.53884741478,"grp":"C"},{"x":"May","y":5072.56394042633,"grp":"C"},{"x":"Sep","y":6625.88788871653,"grp":"C"},{"x":"Apr","y":2023.21958495304,"grp":"C"},{"x":"Mar","y":8263.89536564238,"grp":"C"},{"x":"May","y":5240.17520691268,"grp":"C"},{"x":"Jul","y":6733.24085492641,"grp":"C"},{"x":"May","y":9755.49786863849,"grp":"C"},{"x":"Sep","y":6634.57923708484,"grp":"C"},{"x":"Jun","y":2215.43367765844,"grp":"C"},{"x":"Mar","y":2200.75476705097,"grp":"C"},{"x":"Dec","y":8656.94375592284,"grp":"C"},{"x":"Mar","y":5529.50830571353,"grp":"C"},{"x":"Sep","y":2938.73069155961,"grp":"C"},{"x":"Feb","y":5017.98750390299,"grp":"C"},{"x":"Apr","y":2304.42514200695,"grp":"C"},{"x":"Jul","y":6315.10072830133,"grp":"C"},{"x":"Aug","y":9866.18892359547,"grp":"C"},{"x":"Oct","y":2222.98273188062,"grp":"C"},{"x":"Oct","y":9058.6974483449,"grp":"C"},{"x":"Mar","y":8621.38877459802,"grp":"C"},{"x":"May","y":4489.11298369057,"grp":"C"},{"x":"Oct","y":6915.45854741707,"grp":"C"},{"x":"Aug","y":5751.06511334889,"grp":"C"},{"x":"Nov","y":7541.94350889884,"grp":"C"},{"x":"Feb","y":7559.03845909052,"grp":"C"},{"x":"May","y":2335.18537506461,"grp":"C"},{"x":"Dec","y":3135.22178865969,"grp":"C"},{"x":"Sep","y":6532.34249236993,"grp":"C"},{"x":"Jul","y":6146.48626116104,"grp":"C"},{"x":"Oct","y":8567.94388662092,"grp":"C"},{"x":"May","y":4201.63581217639,"grp":"C"},{"x":"Aug","y":3438.72086959891,"grp":"C"},{"x":"Jul","y":4418.24288805947,"grp":"C"},{"x":"Jan","y":4288.86045725085,"grp":"C"},{"x":"Mar","y":9270.46037302352,"grp":"C"},{"x":"Feb","y":7885.82976767793,"grp":"C"},{"x":"Aug","y":3880.92752522789,"grp":"C"},{"x":"Feb","y":1522.05104543827,"grp":"C"},{"x":"May","y":5193.26404808089,"grp":"C"},{"x":"Dec","y":6514.58743587136,"grp":"C"},{"x":"Mar","y":5991.94321781397,"grp":"C"},{"x":"Apr","y":8198.51090293378,"grp":"C"},{"x":"Jul","y":3896.34060882963,"grp":"C"},{"x":"Feb","y":5074.22486273572,"grp":"C"},{"x":"Jul","y":1870.13449822553,"grp":"C"},{"x":"Apr","y":4660.3020823095,"grp":"C"},{"x":"Apr","y":5188.11620166525,"grp":"C"},{"x":"Apr","y":5558.58265305869,"grp":"C"},{"x":"Oct","y":4445.3491687309,"grp":"C"},{"x":"May","y":3803.28240222298,"grp":"C"},{"x":"Sep","y":6848.09555322863,"grp":"C"},{"x":"Oct","y":6770.19690279849,"grp":"C"},{"x":"Oct","y":3402.83509436995,"grp":"C"},{"x":"Aug","y":3969.45316111669,"grp":"C"},{"x":"Nov","y":2035.61913548037,"grp":"C"},{"x":"Feb","y":5690.2924219612,"grp":"C"},{"x":"Sep","y":3444.70222503878,"grp":"C"},{"x":"Dec","y":8120.18806114793,"grp":"C"},{"x":"Sep","y":7790.22369510494,"grp":"C"},{"x":"Sep","y":4518.78040307201,"grp":"C"},{"x":"Oct","y":7434.22310519964,"grp":"C"},{"x":"Apr","y":4506.11868756823,"grp":"C"},{"x":"Feb","y":4403.62127614208,"grp":"C"},{"x":"Aug","y":2774.56600917503,"grp":"C"},{"x":"May","y":9559.25518390723,"grp":"C"},{"x":"Mar","y":9371.14419206046,"grp":"C"},{"x":"May","y":5054.32790308259,"grp":"C"},{"x":"Mar","y":6337.32635038905,"grp":"C"},{"x":"Feb","y":4849.02437054552,"grp":"C"},{"x":"Jul","y":1451.00185158663,"grp":"C"},{"x":"Oct","y":3486.34961573407,"grp":"C"},{"x":"Aug","y":8838.70545402169,"grp":"C"},{"x":"Nov","y":8721.12532122992,"grp":"C"},{"x":"Jan","y":2293.67717215791,"grp":"C"},{"x":"Feb","y":8544.48651871644,"grp":"C"},{"x":"Mar","y":4085.48666303977,"grp":"C"},{"x":"Aug","y":1386.72216143459,"grp":"C"},{"x":"May","y":5434.75849274546,"grp":"C"},{"x":"Dec","y":5670.64488469623,"grp":"C"},{"x":"Jan","y":9555.32617308199,"grp":"C"},{"x":"May","y":7081.37714723125,"grp":"C"},{"x":"Jun","y":6490.43487501331,"grp":"C"},{"x":"Nov","y":2014.80905548669,"grp":"C"},{"x":"Feb","y":3458.61056633294,"grp":"C"},{"x":"May","y":5637.27560197003,"grp":"C"},{"x":"Sep","y":8522.00494892895,"grp":"C"},{"x":"Oct","y":3268.86601909064,"grp":"C"},{"x":"Jul","y":9856.57576704398,"grp":"C"},{"x":"Mar","y":2823.11411388218,"grp":"C"},{"x":"May","y":4381.88582356088,"grp":"C"},{"x":"Oct","y":1600.88981431909,"grp":"C"},{"x":"Aug","y":2053.75547427684,"grp":"C"},{"x":"Apr","y":5842.94961462729,"grp":"C"},{"x":"May","y":3770.04606905393,"grp":"C"},{"x":"Mar","y":4290.14043672942,"grp":"C"},{"x":"Aug","y":3102.00734692626,"grp":"C"},{"x":"Aug","y":2732.36698447727,"grp":"C"},{"x":"Sep","y":7072.32625503093,"grp":"C"},{"x":"Mar","y":6669.91417249665,"grp":"C"},{"x":"Jul","y":4690.22880634293,"grp":"C"},{"x":"May","y":3735.36817217246,"grp":"C"},{"x":"Nov","y":5099.11238658242,"grp":"C"},{"x":"Feb","y":7964.8931317497,"grp":"C"},{"x":"Jan","y":2715.27557144873,"grp":"C"},{"x":"Nov","y":9247.01798358001,"grp":"C"},{"x":"Aug","y":1567.04548094422,"grp":"C"},{"x":"Nov","y":7903.27893919311,"grp":"C"},{"x":"Apr","y":1850.00320780091,"grp":"C"},{"x":"May","y":5688.05556860752,"grp":"C"},{"x":"Oct","y":8197.45540549047,"grp":"C"},{"x":"Jun","y":4954.24296683632,"grp":"C"},{"x":"Jul","y":7158.07796921581,"grp":"C"},{"x":"Sep","y":8474.78882712312,"grp":"C"},{"x":"Feb","y":7955.00483503565,"grp":"C"},{"x":"Apr","y":7486.08238855377,"grp":"C"},{"x":"May","y":5755.32821426168,"grp":"C"},{"x":"Jul","y":9932.23107443191,"grp":"C"},{"x":"Nov","y":8735.83470424637,"grp":"C"},{"x":"Apr","y":7878.8012296427,"grp":"C"},{"x":"Feb","y":4169.66716432944,"grp":"C"},{"x":"Mar","y":8427.31674504466,"grp":"C"},{"x":"Nov","y":1243.29700018279,"grp":"C"},{"x":"Feb","y":4930.12270354666,"grp":"C"},{"x":"Jun","y":6818.17977176979,"grp":"C"},{"x":"Nov","y":9384.23597882502,"grp":"C"},{"x":"Sep","y":4407.16927708127,"grp":"C"},{"x":"May","y":3012.80514895916,"grp":"C"},{"x":"Jul","y":8951.2751721777,"grp":"C"},{"x":"Mar","y":3241.36199615896,"grp":"C"},{"x":"Feb","y":7380.79316844232,"grp":"C"},{"x":"Jul","y":4218.53600884788,"grp":"C"},{"x":"Apr","y":5080.62147651799,"grp":"C"},{"x":"Apr","y":8474.9728559982,"grp":"C"},{"x":"Mar","y":7303.29693108797,"grp":"C"},{"x":"Aug","y":3003.55580681935,"grp":"D"},{"x":"Sep","y":5209.18041258119,"grp":"D"},{"x":"Feb","y":8534.47282034904,"grp":"D"},{"x":"Oct","y":3012.73095444776,"grp":"D"},{"x":"Nov","y":4545.62441399321,"grp":"D"},{"x":"Oct","y":1222.88680821657,"grp":"D"},{"x":"Dec","y":9764.35500686057,"grp":"D"},{"x":"Oct","y":7197.89391616359,"grp":"D"},{"x":"Feb","y":6084.23989918083,"grp":"D"},{"x":"Oct","y":8574.63853154331,"grp":"D"},{"x":"Apr","y":1069.17083449662,"grp":"D"},{"x":"May","y":4370.07805216126,"grp":"D"},{"x":"Sep","y":5521.63551724516,"grp":"D"},{"x":"Jul","y":5328.10533372685,"grp":"D"},{"x":"Nov","y":3664.13106652908,"grp":"D"},{"x":"Nov","y":2699.47016867809,"grp":"D"},{"x":"Apr","y":3024.24049982801,"grp":"D"},{"x":"Feb","y":6279.8216373194,"grp":"D"},{"x":"Nov","y":9635.08870103396,"grp":"D"},{"x":"Mar","y":9840.65277455375,"grp":"D"},{"x":"Oct","y":6762.74645747617,"grp":"D"},{"x":"Feb","y":7568.60805908218,"grp":"D"},{"x":"Nov","y":3869.48504764587,"grp":"D"},{"x":"May","y":2826.94808859378,"grp":"D"},{"x":"Nov","y":7897.80512475409,"grp":"D"},{"x":"Apr","y":7634.66353924014,"grp":"D"},{"x":"May","y":9261.77347754128,"grp":"D"},{"x":"Jun","y":7318.4107451234,"grp":"D"},{"x":"Aug","y":6710.21791687235,"grp":"D"},{"x":"Apr","y":7992.47570778243,"grp":"D"},{"x":"May","y":9912.6621237956,"grp":"D"},{"x":"Jan","y":6145.79567615874,"grp":"D"},{"x":"Jul","y":9525.52882162854,"grp":"D"},{"x":"Feb","y":4671.43286205828,"grp":"D"},{"x":"Aug","y":8543.18409669213,"grp":"D"},{"x":"Jul","y":7732.35493712127,"grp":"D"},{"x":"Jul","y":9313.50293359719,"grp":"D"},{"x":"Oct","y":5342.49728987925,"grp":"D"},{"x":"May","y":8493.1438267231,"grp":"D"},{"x":"Nov","y":7292.49483719468,"grp":"D"},{"x":"Sep","y":8483.60725352541,"grp":"D"},{"x":"Jun","y":3073.26495437883,"grp":"D"},{"x":"May","y":2805.8598425705,"grp":"D"},{"x":"Sep","y":9018.71650153771,"grp":"D"},{"x":"Jul","y":8946.30847545341,"grp":"D"},{"x":"Feb","y":7002.23140791059,"grp":"D"},{"x":"Aug","y":2406.70090448111,"grp":"D"},{"x":"Sep","y":5030.74572235346,"grp":"D"},{"x":"Sep","y":6224.44358072244,"grp":"D"},{"x":"May","y":9127.44093989022,"grp":"D"},{"x":"Mar","y":5204.10366356373,"grp":"D"},{"x":"Apr","y":3294.9106709566,"grp":"D"},{"x":"Jun","y":1675.57081347331,"grp":"D"},{"x":"Dec","y":6211.60370786674,"grp":"D"},{"x":"May","y":9353.35954325274,"grp":"D"},{"x":"Dec","y":5098.05742138997,"grp":"D"},{"x":"Oct","y":6299.48456794955,"grp":"D"},{"x":"Aug","y":5490.23811495863,"grp":"D"},{"x":"Aug","y":6878.49554046988,"grp":"D"},{"x":"Oct","y":8449.96697129682,"grp":"D"},{"x":"Aug","y":9953.48403532989,"grp":"D"},{"x":"Jun","y":9568.82544187829,"grp":"D"},{"x":"Nov","y":7485.60122121125,"grp":"D"},{"x":"Jun","y":3941.81342679076,"grp":"D"},{"x":"May","y":7727.56769694388,"grp":"D"},{"x":"Sep","y":3294.73969480023,"grp":"D"},{"x":"Jul","y":4435.98719057627,"grp":"D"},{"x":"Aug","y":7114.06464804895,"grp":"D"},{"x":"Aug","y":2407.98686025664,"grp":"D"},{"x":"Oct","y":2505.72134950198,"grp":"D"},{"x":"May","y":5240.35286763683,"grp":"D"},{"x":"Mar","y":9476.61142493598,"grp":"D"},{"x":"Apr","y":8171.62969522178,"grp":"D"},{"x":"Feb","y":8463.4839259088,"grp":"D"},{"x":"Aug","y":1912.53255330957,"grp":"D"},{"x":"Nov","y":9961.13199391402,"grp":"D"},{"x":"May","y":3946.16418983787,"grp":"D"},{"x":"Jul","y":1629.57649235614,"grp":"D"},{"x":"Sep","y":8118.73524473049,"grp":"D"},{"x":"Aug","y":1996.63843261078,"grp":"D"},{"x":"Oct","y":5154.40185694024,"grp":"D"},{"x":"Apr","y":5511.13378885202,"grp":"D"},{"x":"Dec","y":1624.71534474753,"grp":"D"},{"x":"Mar","y":1784.24720047042,"grp":"D"},{"x":"Sep","y":1111.03781638667,"grp":"D"},{"x":"Aug","y":2388.9875060413,"grp":"D"},{"x":"May","y":9529.56059458666,"grp":"D"},{"x":"May","y":6037.41898410954,"grp":"D"},{"x":"Jul","y":3656.51776501909,"grp":"D"},{"x":"Feb","y":4351.808862295,"grp":"D"},{"x":"Aug","y":9875.68893912248,"grp":"D"},{"x":"Mar","y":5222.61094558053,"grp":"D"},{"x":"Jan","y":6420.19103746861,"grp":"D"},{"x":"Oct","y":2117.22816317342,"grp":"D"},{"x":"Feb","y":4936.63645233028,"grp":"D"},{"x":"Dec","y":7795.43255129829,"grp":"D"},{"x":"Nov","y":1729.89677987061,"grp":"D"},{"x":"May","y":9878.92471416853,"grp":"D"},{"x":"May","y":2596.19661606848,"grp":"D"},{"x":"Nov","y":1662.00315044262,"grp":"D"},{"x":"Feb","y":7111.88625637442,"grp":"D"},{"x":"Nov","y":3506.52167364024,"grp":"D"},{"x":"Mar","y":8113.07467520237,"grp":"D"},{"x":"Jul","y":1321.04251952842,"grp":"D"},{"x":"Aug","y":1077.10180804133,"grp":"D"},{"x":"Oct","y":1587.78133708984,"grp":"D"},{"x":"Mar","y":8968.749351101,"grp":"D"},{"x":"Jun","y":5344.02988944203,"grp":"D"},{"x":"Aug","y":4196.29154214635,"grp":"D"},{"x":"May","y":5651.46575542167,"grp":"D"},{"x":"Mar","y":4669.48646469973,"grp":"D"},{"x":"Oct","y":4928.9440382272,"grp":"D"},{"x":"Aug","y":1244.6241802536,"grp":"D"},{"x":"Jun","y":2976.69188468717,"grp":"D"},{"x":"May","y":3326.13017573021,"grp":"D"},{"x":"May","y":9565.6006031204,"grp":"D"},{"x":"Jul","y":7720.16142634675,"grp":"D"},{"x":"Sep","y":1242.52882180735,"grp":"D"},{"x":"Feb","y":4721.64328047074,"grp":"D"},{"x":"Apr","y":2382.55016459152,"grp":"D"},{"x":"Mar","y":4285.39478126913,"grp":"D"},{"x":"Aug","y":8287.42977790535,"grp":"D"},{"x":"Nov","y":8667.76803671382,"grp":"D"},{"x":"Feb","y":4862.13173298165,"grp":"D"},{"x":"Nov","y":5328.63936154172,"grp":"D"},{"x":"Nov","y":9107.93779976666,"grp":"D"},{"x":"Jun","y":1336.26776887104,"grp":"D"},{"x":"Feb","y":9685.14703400433,"grp":"D"},{"x":"Mar","y":2681.94527295418,"grp":"D"},{"x":"Jul","y":4747.28405242786,"grp":"D"},{"x":"Sep","y":2568.00329894759,"grp":"D"},{"x":"Nov","y":8476.68609605171,"grp":"D"},{"x":"Mar","y":9930.71405263618,"grp":"D"},{"x":"Sep","y":9087.29246398434,"grp":"D"},{"x":"Oct","y":5041.09665821306,"grp":"D"},{"x":"Feb","y":9665.57678207755,"grp":"D"},{"x":"Sep","y":1025.53140069358,"grp":"D"},{"x":"Apr","y":7539.83307769522,"grp":"D"},{"x":"Jun","y":7031.29695425741,"grp":"D"},{"x":"Sep","y":3939.38062759116,"grp":"D"},{"x":"Oct","y":4388.21499445476,"grp":"D"},{"x":"Jul","y":7719.76781846024,"grp":"D"},{"x":"Apr","y":6602.91081643663,"grp":"D"},{"x":"Jul","y":8580.13693639077,"grp":"D"},{"x":"Dec","y":2610.00956711359,"grp":"D"},{"x":"Jun","y":7279.63833883405,"grp":"D"},{"x":"Aug","y":1989.60952786729,"grp":"D"},{"x":"Jun","y":5559.97817288153,"grp":"D"},{"x":"May","y":5286.75193618983,"grp":"D"},{"x":"Mar","y":3795.97011581063,"grp":"D"},{"x":"Aug","y":6224.58702861331,"grp":"D"},{"x":"Apr","y":5288.46654877998,"grp":"D"},{"x":"May","y":2163.06534665637,"grp":"D"},{"x":"Mar","y":5630.79400616698,"grp":"D"},{"x":"Jun","y":8884.06937220134,"grp":"D"},{"x":"Feb","y":5786.80016100407,"grp":"D"},{"x":"Apr","y":6708.09070719406,"grp":"D"},{"x":"Dec","y":8285.58875783347,"grp":"D"},{"x":"Nov","y":3502.62928963639,"grp":"D"},{"x":"Mar","y":2664.59754761308,"grp":"D"},{"x":"Mar","y":4093.02549134009,"grp":"D"},{"x":"Jun","y":3296.24106967822,"grp":"D"},{"x":"Jul","y":6635.49641845748,"grp":"D"},{"x":"Nov","y":5810.14801096171,"grp":"D"},{"x":"May","y":8795.00221088529,"grp":"D"},{"x":"Jul","y":3959.13005317561,"grp":"D"},{"x":"Aug","y":9720.19788157195,"grp":"D"},{"x":"Jun","y":7433.88246675022,"grp":"D"},{"x":"Nov","y":4067.30444380082,"grp":"D"},{"x":"Jun","y":5310.58783293702,"grp":"D"},{"x":"May","y":4571.25002308749,"grp":"D"},{"x":"Aug","y":3043.69980259798,"grp":"D"},{"x":"Feb","y":2015.80154616386,"grp":"D"},{"x":"Oct","y":8964.89371126518,"grp":"D"},{"x":"Jul","y":9671.21761851013,"grp":"D"},{"x":"Jun","y":5100.12245411053,"grp":"D"},{"x":"Oct","y":8449.40597680397,"grp":"D"},{"x":"Dec","y":7005.70540921763,"grp":"D"},{"x":"Mar","y":9580.17687732354,"grp":"D"},{"x":"Jul","y":2552.56951833144,"grp":"D"},{"x":"Nov","y":5475.49646161497,"grp":"D"},{"x":"Apr","y":7750.86873606779,"grp":"D"},{"x":"Jul","y":4385.74317120947,"grp":"D"},{"x":"Jun","y":4603.14173344523,"grp":"D"},{"x":"Dec","y":7302.82119312324,"grp":"D"},{"x":"May","y":3735.9948346857,"grp":"D"},{"x":"Jan","y":9003.64813627675,"grp":"D"},{"x":"Nov","y":1401.06884692796,"grp":"D"},{"x":"Feb","y":8091.93199290894,"grp":"D"},{"x":"Aug","y":8582.46534946375,"grp":"D"},{"x":"Jul","y":7542.31657274067,"grp":"D"},{"x":"Aug","y":2229.028187925,"grp":"D"},{"x":"Aug","y":4873.20695538074,"grp":"D"},{"x":"Mar","y":3192.77719338425,"grp":"D"},{"x":"Nov","y":9473.40755769983,"grp":"D"},{"x":"Mar","y":8044.07853633165,"grp":"D"},{"x":"Jul","y":5014.23802296631,"grp":"D"},{"x":"Jun","y":1076.1629762128,"grp":"D"},{"x":"Oct","y":5079.73510911688,"grp":"D"},{"x":"Feb","y":6737.45823465288,"grp":"D"},{"x":"May","y":9641.45056554116,"grp":"E"},{"x":"Feb","y":5641.75544423051,"grp":"E"},{"x":"Aug","y":9456.939563388,"grp":"E"},{"x":"Feb","y":9740.37190712988,"grp":"E"},{"x":"Aug","y":7789.72367895767,"grp":"E"},{"x":"May","y":8619.27217850462,"grp":"E"},{"x":"Feb","y":3517.86178094335,"grp":"E"},{"x":"May","y":3469.43727578036,"grp":"E"},{"x":"Apr","y":6734.16536836885,"grp":"E"},{"x":"Sep","y":1740.43274624273,"grp":"E"},{"x":"Oct","y":4394.51214647852,"grp":"E"},{"x":"Feb","y":4975.74331751093,"grp":"E"},{"x":"Jan","y":5224.08357262611,"grp":"E"},{"x":"Mar","y":8745.69474766031,"grp":"E"},{"x":"Dec","y":6095.10381799191,"grp":"E"},{"x":"Apr","y":4265.23413113318,"grp":"E"},{"x":"Jun","y":1716.04275540449,"grp":"E"},{"x":"Oct","y":6327.90526305325,"grp":"E"},{"x":"Jul","y":7671.81635019369,"grp":"E"},{"x":"Nov","y":6277.55859261379,"grp":"E"},{"x":"May","y":7782.84100489691,"grp":"E"},{"x":"Mar","y":7314.4888211973,"grp":"E"},{"x":"May","y":2413.96688506939,"grp":"E"},{"x":"Mar","y":3919.94894319214,"grp":"E"},{"x":"Oct","y":5750.16122777015,"grp":"E"},{"x":"Jun","y":2993.70052223094,"grp":"E"},{"x":"Jan","y":9379.50431695208,"grp":"E"},{"x":"Nov","y":1524.34093528427,"grp":"E"},{"x":"Jun","y":8031.99233696796,"grp":"E"},{"x":"Feb","y":3802.51143896021,"grp":"E"},{"x":"Jun","y":8503.76045843586,"grp":"E"},{"x":"Feb","y":4140.73174702935,"grp":"E"},{"x":"Aug","y":9238.42368717305,"grp":"E"},{"x":"Nov","y":2513.20536853746,"grp":"E"},{"x":"Apr","y":7880.79985673539,"grp":"E"},{"x":"Apr","y":2121.31869746372,"grp":"E"},{"x":"May","y":6674.3302536197,"grp":"E"},{"x":"May","y":2938.65312752314,"grp":"E"},{"x":"Jan","y":9387.29778747074,"grp":"E"},{"x":"Feb","y":4227.93625877239,"grp":"E"},{"x":"Dec","y":2866.26587808132,"grp":"E"},{"x":"Jun","y":5627.94808810577,"grp":"E"},{"x":"Aug","y":4776.49006480351,"grp":"E"},{"x":"Jul","y":5809.134835843,"grp":"E"},{"x":"Sep","y":7646.37680258602,"grp":"E"},{"x":"Mar","y":6057.07462038845,"grp":"E"},{"x":"Nov","y":5053.13456733711,"grp":"E"},{"x":"Mar","y":4298.349163495,"grp":"E"},{"x":"Jan","y":4792.0672702603,"grp":"E"},{"x":"Jul","y":8853.74720883556,"grp":"E"},{"x":"Aug","y":4418.84399834089,"grp":"E"},{"x":"Apr","y":4123.30249720253,"grp":"E"},{"x":"Aug","y":9661.74596734345,"grp":"E"},{"x":"Feb","y":1911.99356340803,"grp":"E"},{"x":"May","y":4229.26602675579,"grp":"E"},{"x":"Feb","y":1472.59568562731,"grp":"E"},{"x":"Oct","y":7478.42598939314,"grp":"E"},{"x":"May","y":6694.21782135032,"grp":"E"},{"x":"Feb","y":3237.91221017018,"grp":"E"},{"x":"Apr","y":1151.61282639019,"grp":"E"},{"x":"Jul","y":5031.38389741071,"grp":"E"},{"x":"Aug","y":7524.58109427243,"grp":"E"},{"x":"Oct","y":4943.18225979805,"grp":"E"},{"x":"Sep","y":1690.74936094694,"grp":"E"},{"x":"Jan","y":5802.39073559642,"grp":"E"},{"x":"Mar","y":6339.82168487273,"grp":"E"},{"x":"May","y":2254.57624555565,"grp":"E"},{"x":"Sep","y":2658.05312315933,"grp":"E"},{"x":"Apr","y":3433.0548979342,"grp":"E"},{"x":"Jan","y":2684.08238585107,"grp":"E"},{"x":"Jul","y":5166.0393520724,"grp":"E"},{"x":"May","y":3262.59044627659,"grp":"E"},{"x":"Jun","y":7235.32860842533,"grp":"E"},{"x":"Apr","y":8812.79953732155,"grp":"E"},{"x":"Apr","y":9095.7392451819,"grp":"E"},{"x":"Apr","y":7783.11561490409,"grp":"E"},{"x":"Feb","y":6975.84466962144,"grp":"E"},{"x":"Apr","y":8596.64660133421,"grp":"E"},{"x":"Apr","y":7810.88411412202,"grp":"E"},{"x":"Mar","y":7632.75342294946,"grp":"E"},{"x":"May","y":6770.65657055937,"grp":"E"},{"x":"Mar","y":2127.52871122211,"grp":"E"},{"x":"Jul","y":9966.20167070068,"grp":"E"},{"x":"Jun","y":6648.40436913073,"grp":"E"},{"x":"Dec","y":3481.90939892083,"grp":"E"},{"x":"Jul","y":5971.23825317249,"grp":"E"},{"x":"Sep","y":9466.22956194915,"grp":"E"},{"x":"Jun","y":4925.6570036523,"grp":"E"},{"x":"Feb","y":4367.94907809235,"grp":"E"},{"x":"Apr","y":4914.82094838284,"grp":"E"},{"x":"Sep","y":8653.91316567548,"grp":"E"},{"x":"Jun","y":9799.8095897492,"grp":"E"},{"x":"Sep","y":8304.66895550489,"grp":"E"},{"x":"Feb","y":8679.56576030701,"grp":"E"},{"x":"Jan","y":8052.95298737474,"grp":"E"},{"x":"May","y":7729.51061581261,"grp":"E"},{"x":"Jun","y":2747.6802857127,"grp":"E"},{"x":"Nov","y":4622.81032814644,"grp":"E"},{"x":"Apr","y":3965.4403438326,"grp":"E"},{"x":"Jul","y":7807.48159158975,"grp":"E"},{"x":"Oct","y":8250.65509974957,"grp":"E"},{"x":"Feb","y":7767.22797309048,"grp":"E"},{"x":"Sep","y":3810.78338203952,"grp":"E"},{"x":"Mar","y":9299.79765648022,"grp":"E"},{"x":"Jun","y":6805.92518416233,"grp":"E"},{"x":"Aug","y":8635.07486344315,"grp":"E"},{"x":"Dec","y":6330.38137783296,"grp":"E"},{"x":"Dec","y":6331.23747818172,"grp":"E"},{"x":"May","y":3449.44381108508,"grp":"E"},{"x":"Sep","y":5911.01710358635,"grp":"E"},{"x":"Feb","y":3110.47206539661,"grp":"E"},{"x":"Feb","y":8972.19269559719,"grp":"E"},{"x":"Jun","y":7656.94060944952,"grp":"E"},{"x":"Jan","y":3889.3647887744,"grp":"E"},{"x":"Jul","y":7711.49556105956,"grp":"E"},{"x":"Nov","y":4814.41642483696,"grp":"E"},{"x":"Jul","y":8715.30891954899,"grp":"E"},{"x":"Sep","y":4403.76679017209,"grp":"E"},{"x":"Sep","y":7581.87972567976,"grp":"E"},{"x":"Sep","y":9334.26479878835,"grp":"E"},{"x":"Feb","y":9749.87510149367,"grp":"E"},{"x":"Jun","y":4820.60716859996,"grp":"E"},{"x":"Oct","y":6674.92516548373,"grp":"E"},{"x":"Jun","y":6840.81921470352,"grp":"E"},{"x":"Aug","y":4681.65437504649,"grp":"E"},{"x":"Jan","y":4933.70899511501,"grp":"E"},{"x":"Jul","y":2216.92915586755,"grp":"E"},{"x":"Jul","y":5521.97592309676,"grp":"E"},{"x":"Mar","y":1743.76443121582,"grp":"E"},{"x":"Dec","y":6429.24099089578,"grp":"E"},{"x":"Sep","y":4973.8013332244,"grp":"E"},{"x":"Sep","y":3380.95385325141,"grp":"E"},{"x":"Dec","y":2920.69602524862,"grp":"E"},{"x":"Oct","y":8340.31044016592,"grp":"E"},{"x":"Aug","y":7171.49015632458,"grp":"E"},{"x":"Jun","y":2599.90460658446,"grp":"E"},{"x":"Sep","y":1984.21454941854,"grp":"E"},{"x":"Nov","y":7314.24702005461,"grp":"E"},{"x":"Jul","y":7204.11645248532,"grp":"E"},{"x":"Sep","y":7889.91688843817,"grp":"E"},{"x":"Jul","y":5024.86357092857,"grp":"E"},{"x":"Mar","y":1819.41659119911,"grp":"E"},{"x":"Dec","y":1161.37724067084,"grp":"E"},{"x":"May","y":4771.49543119594,"grp":"E"},{"x":"Mar","y":6728.38955605403,"grp":"E"},{"x":"Jun","y":6021.95579558611,"grp":"E"},{"x":"Feb","y":9823.31929216161,"grp":"E"},{"x":"May","y":2995.84287591279,"grp":"E"},{"x":"Feb","y":6198.64613632672,"grp":"E"},{"x":"Dec","y":6364.25571003929,"grp":"E"},{"x":"Feb","y":6974.96184147894,"grp":"E"},{"x":"Jul","y":8234.67842536047,"grp":"E"},{"x":"Nov","y":4486.94518045522,"grp":"E"},{"x":"Apr","y":9203.78970517777,"grp":"E"},{"x":"Jul","y":6466.50522248819,"grp":"E"},{"x":"Apr","y":3407.90465800092,"grp":"E"},{"x":"Oct","y":6035.91646510176,"grp":"E"},{"x":"Apr","y":5536.88402008265,"grp":"E"},{"x":"Oct","y":4316.72720285133,"grp":"E"},{"x":"Nov","y":8540.83857825026,"grp":"E"},{"x":"Mar","y":6548.51301922463,"grp":"E"},{"x":"Nov","y":9043.00402151421,"grp":"E"},{"x":"Sep","y":6253.20822931826,"grp":"E"},{"x":"Feb","y":2780.37646808662,"grp":"E"},{"x":"Oct","y":4148.14697997645,"grp":"E"},{"x":"Dec","y":3018.92802654766,"grp":"E"},{"x":"May","y":3742.52240313217,"grp":"E"},{"x":"Sep","y":6808.50269063376,"grp":"E"},{"x":"Aug","y":3571.84000313282,"grp":"E"},{"x":"Jul","y":5126.6915469896,"grp":"E"},{"x":"Mar","y":4234.20734936371,"grp":"E"},{"x":"Feb","y":6451.13272196613,"grp":"E"},{"x":"Oct","y":9211.2332333345,"grp":"E"},{"x":"Aug","y":7644.81841400266,"grp":"E"},{"x":"May","y":3340.88555863127,"grp":"E"},{"x":"Mar","y":3138.33806291223,"grp":"E"},{"x":"Nov","y":3012.89196033031,"grp":"E"},{"x":"Sep","y":7429.77760359645,"grp":"E"},{"x":"Aug","y":1497.87473445758,"grp":"E"},{"x":"May","y":6999.98146831058,"grp":"E"},{"x":"Jul","y":5423.74008707702,"grp":"E"},{"x":"Jun","y":7669.98241702095,"grp":"E"},{"x":"Apr","y":7109.59051386453,"grp":"E"},{"x":"Nov","y":2267.57406909019,"grp":"E"},{"x":"Nov","y":2084.90688866004,"grp":"E"},{"x":"Mar","y":6538.13490294851,"grp":"E"},{"x":"Jan","y":8988.13765705563,"grp":"E"},{"x":"Feb","y":5954.15660506114,"grp":"E"},{"x":"Aug","y":9500.5803341046,"grp":"E"},{"x":"Jun","y":3339.19669105671,"grp":"E"},{"x":"Apr","y":6544.35835499316,"grp":"E"},{"x":"Sep","y":5665.2657375671,"grp":"E"},{"x":"Jul","y":7277.88273454644,"grp":"E"},{"x":"Oct","y":1104.33941637166,"grp":"E"},{"x":"Apr","y":8649.50450253673,"grp":"E"},{"x":"Apr","y":4213.17949495278,"grp":"E"},{"x":"May","y":7026.52957080863,"grp":"E"},{"x":"May","y":7708.17869319581,"grp":"E"},{"x":"Feb","y":4154.28021131083,"grp":"E"},{"x":"Feb","y":8582.5207203161,"grp":"E"}];
  
  return drawChart(opts,data);
  
  function drawChart(opts, data){ 
    var subCharts = [];
    
    var c = null;
    var assignedColors = {};
    
      //move this to top or make function since duplicated
    //allow manipulation of default colors to use with dimple
    if(opts.defaultColors.length) {
      defaultColorsArray = [];
      if (typeof(opts.defaultColors) == "function") {
        //assume this is a d3 scale
        //if there is a domain for the color scale given
        //then we will need to assign colors with dimples assignColor
        if( opts.defaultColors.domain().length > 0 ){
          defaultColorsArray = opts.defaultColors.range();
          opts.defaultColors.domain().forEach( function( d, i ) {
            assignedColors[d] = new dimple.color(opts.defaultColors.range()[i])
          })
        } else {
          for (var n=0;n<opts.defaultColors.range().length;n++) {
            defaultColorsArray.push(opts.defaultColors(n));
          };
        }
      } else {
        defaultColorsArray = opts.defaultColors;
      }
  
      
      //if colors not assigned with no keys and opts.groups
      if (!(Object.keys(assignedColors).length) & Boolean(opts.groups)) {
        //let's just assign colors in order with each unique
        //this is important if facetting where need colors assigned
        //if not in all pairs
        opts.groups = (typeof opts.groups == "string") ? [opts.groups] : opts.groups;
        d3.set(
          data.map(function(d){
            //dimple colors by last item in groups
            return d[opts.groups[opts.groups.length-1]]
          })
        ).values().forEach(function(u,i){
          //u will be our uniqe and will pick color from defaultColorsArray
          //console.log([u,defaultColorsArray[i]].concat());
          assignedColors[u] = new dimple.color(defaultColorsArray[i % defaultColorsArray.length])
        })
      }
    }
  
    
    //do series
    //set up a function since same for each
    //as of now we have x,y,groups,data,type in opts for primary layer
    //and other layers reside in opts.layers
    function buildSeries(layer, hidden, myChart){
      //inherit from primary layer if not intentionally changed or xAxis, yAxis, zAxis null
      if (!layer.xAxis) layer.xAxis = opts.xAxis;    
      if (!layer.yAxis) layer.yAxis = opts.yAxis;
      if (!layer.zAxis) layer.zAxis = opts.zAxis;
      
      var x = buildAxis("x", layer, myChart);
      x.hidden = hidden;
      
      var y = buildAxis("y", layer, myChart);
      y.hidden = hidden;
      
      //z for bubbles
      var z = null;
      if (!(typeof(layer.zAxis) === 'undefined') && layer.zAxis.type){
        z = buildAxis("z", layer, myChart);
      };
      
      //here think I need to evaluate group and if missing do null
      //as the group argument
      //if provided need to use groups from layer
      var s = new dimple.series(myChart, null, x, y, z, c, dimple.plot[layer.type], dimple.aggregateMethod.avg, dimple.plot[layer.type].stacked);
      
      //as of v1.1.4 dimple can use different dataset for each series
      if(layer.data){
        //convert to an array of objects
        var tempdata;
        //avoid lodash for now
        datakeys = d3.keys(layer.data)
        tempdata = layer.data[datakeys[1]].map(function(d,i){
          var tempobj = {}
          datakeys.forEach(function(key){
            tempobj[key] = layer.data[key][i]
          })
          return tempobj
        })
        s.data = tempdata;
      }
      
      if(layer.hasOwnProperty("groups")) {
        s.categoryFields = (typeof layer.groups === "object") ? layer.groups : [layer.groups];
        //series offers an aggregate method that we will also need to check if available
        //options available are avg, count, max, min, sum
      }
      if (!(typeof(layer.aggregate) === 'undefined')) {
        s.aggregate = eval(layer.aggregate);
      }
      if (!(typeof(layer.lineWeight) === 'undefined')) {
        s.lineWeight = layer.lineWeight;
      }
      if (!(typeof(layer.barGap) === 'undefined')) {
        s.barGap = layer.barGap;
      }    
      if (!(typeof(layer.interpolation) === 'undefined')) {
        s.interpolation = layer.interpolation;
      }     
     /* if (!(typeof(layer.eventHandler) === 'undefined')) {
        layer.eventHandler = (layer.eventHandler.length === "undefined") ? layer.eventHandler : [layer.eventHandler];
        layer.eventHandler.forEach(function(evt){
          s.addEventHandler(evt.event, eval(evt.handler))
        })
      }*/
        
      myChart.series.push(s);
      
      /*placeholder fix domain of primary scale for new series data
      //not working right now but something like this
      //for now just use overrideMin and overrideMax from rCharts
      for( var i = 0; i<2; i++) {
        if (!myChart.axes[i].overrideMin) {
          myChart.series[0]._axisBounds(i==0?"x":"y").min = myChart.series[0]._axisBounds(i==0?"x":"y").min < s._axisBounds(i==0?"x":"y").min ? myChart.series[0]._axisBounds(i==0?"x":"y").min : s._axisBounds(i==0?"x":"y").min;
        }
        if (!myChart.axes[i].overrideMax) {  
          myChart.series[0]._axisBounds(i==0?"x":"y")._max = myChart.series[0]._axisBounds(i==0?"x":"y").max > s._axisBounds(i==0?"x":"y").max ? myChart.series[0]._axisBounds(i==0?"x":"y").max : s._axisBounds(i==0?"x":"y").max;
        }
        myChart.axes[i]._update();
      }
      */
      
      return myChart;
    };
  
      
    //function to build axes
    function buildAxis(position, layer, myChart){
      var axis;
      var axisopts = opts[position+"Axis"];
      
      if(axisopts.measure) {
        axis = myChart[axisopts.type](position,layer[position],axisopts.measure);
      } else {
        axis = myChart[axisopts.type](position, layer[position]);
      };
      if(!(axisopts.type === "addPctAxis")) axis.showPercent = axisopts.showPercent;
      if (axisopts.orderRule) axis.addOrderRule(axisopts.orderRule);
      if (axisopts.grouporderRule) axis.addGroupOrderRule(axisopts.grouporderRule);  
      if (axisopts.overrideMin) axis.overrideMin = axisopts.overrideMin;
      if (axisopts.overrideMax) axis.overrideMax = axisopts.overrideMax;
      if (axisopts.overrideMax) axis.overrideMax = axisopts.overrideMax;
      if (axisopts.inputFormat) axis.dateParseFormat = axisopts.inputFormat;
      if (axisopts.outputFormat) axis.tickFormat = axisopts.outputFormat;    
      return axis;
    };
        
        
  
    //if facet not provided for x or y make Dummy variable
    //handle NULL facet
    if (typeof opts.facet == "undefined") opts.facet = {}
    opts.facet.x = opts.facet.x ? opts.facet.x : "Dummy"
    opts.facet.y = opts.facet.y ? opts.facet.y : "Dummy"    
    if(opts.facet.x === "Dummy" || opts.facet.y === "Dummy") {
      data.forEach(function(d){
        d.Dummy = 1;
      })
    }
  
    var rows = d3.set(data.map(function(d){return d[opts.facet.y]})).values();
    var nrow = opts.facet.nrow ? opts.facet.nrow : rows.length;
    var cols = d3.set(data.map(function(d){return d[opts.facet.x]})).values()
    var ncol = opts.facet.ncol ? opts.facet.ncol : cols.length;
    
    var tuples = d3.merge(rows.map(function(row,irow){return cols.map(function(col,icol){return {key:row + "~" + col, values: {"row":irow, "col":icol} }})}))
      
    var grid = d3.layout.grid()
      .rows( nrow )
      .cols( ncol )
      .size([ opts.width, opts.height-100])
      .bands();
    
    var svgGrid = d3.select("#" + opts.id).append("svg")
      .attr("width", opts.width)
      .attr("height", opts.height);
     // .attr("transform", "translate(50,0)");
  
    grid(tuples);
  
  /* var cells = d3.select("#" + opts.id).selectAll("svg")
      .data(grid(tuples))
      .enter()
        .append("svg")
          .attr("class", "cell")
          .attr("id", function(d) {
            return d.key;
          })
          .attr("transform", function(d, i) {
             return "translate(" + d.x + "," + d.y + ")"
           })
          .attr("width", grid.nodeSize()[0])
          .attr("height", grid.nodeSize()[1]);
  
    var color = d3.scale.linear()
      .domain([0, 3, 6])
      .range(["red", "lightgray", "green"]);
      
  /*  cells.selectAll("rect")
      .data(function(d){
        return [d];
      })
        .enter().append("rect")
          .attr("width", grid.nodeSize()[0])
          .attr("height", grid.nodeSize()[1])
          .style("fill", function(d) {return color(d.values.row)});         
  */
      tuples.forEach(function(cell,cellnum) {
          //cell = d3.select(cell);
      
          // Filter the data set for the quarter and the price tier
          // of the current shape
          var filteredData = dimple.filterData(data, opts.facet.x, cell.key.split('~')[1]);
          filteredData = dimple.filterData(filteredData, opts.facet.y, cell.key.split('~')[0]);    
          
          // Draw a new chart which will go in the current shape
          var subChart = new dimple.chart(svgGrid, filteredData);
  
          if (tuples.length > 1){
            // Position the chart inside the shape
            subChart.height = grid.nodeSize()[1]
            subChart.width = grid.nodeSize()[0]      
            
            if (opts.margins) {
              subChart.setBounds(
                parseFloat(cell.x + opts.margins.left),
                parseFloat(cell.y + opts.margins.top),
                subChart.width - opts.margins.right- opts.margins.left,
                subChart.height - opts.margins.top - opts.margins.bottom
              )
            } else {
              subChart.setBounds(
                parseFloat(cell.x + 50), 
                parseFloat(cell.y + 10),
                parseFloat(grid.nodeSize()[0] - 50),
                parseFloat(grid.nodeSize()[1]) - 10
              );
            }  
          } else { //only one chart
            if (opts.bounds) {
              subChart.setBounds(opts.bounds.x, opts.bounds.y, opts.bounds.width, opts.bounds.height);//myChart.setBounds(80, 30, 480, 330);
            }
          }
          
            //dimple allows use of custom CSS with noFormats
            if(opts.noFormats) { subChart.noFormats = opts.noFormats; };
            
            //need to fix later for better colorAxis support
            if(d3.keys(opts.colorAxis).length > 0) {
              c = subChart[opts.colorAxis.type](opts.colorAxis.colorSeries,opts.colorAxis.palette) ;
              if(opts.colorAxis.outputFormat){
                c.tickFormat = opts.colorAxis.outputFormat;
              }
            }
          
            //add the colors from the array into the chart's defaultColors
            if (typeof defaultColorsArray != "undefined"){
              subChart.defaultColors = defaultColorsArray.map(function(d) {
                return new dimple.color(d);
              });          
            }
            subChart._assignedColors = assignedColors;
            
            subChart = buildSeries(opts, false, subChart);
            if (opts.layers.length > 0) {
              opts.layers.forEach(function(layer){
                subChart = buildSeries(layer, true, subChart);
              })
            }
          
            //unsure if this is best but if legend is provided (not empty) then evaluate
            if(d3.keys(opts.legend).length > 0) {
              var l =subChart.addLegend();
              d3.keys(opts.legend).forEach(function(d){
                l[d] = opts.legend[d];
              });
            }
            //quick way to get this going but need to make this cleaner
            if(opts.storyboard) {
              subChart.setStoryboard(opts.storyboard);
            };
            
            //catch all for other options
            //these can be provided by dMyChart$chart( ... )
              
            
            //add facet row and column in case we need later
            subChart.facetposition = cell.values;
            
            subCharts.push(subChart);
          })
  
      subCharts.forEach(function(subChart) {
        subChart.draw();
      })
    
    //get rid of all y for those not in column 1
    //can easily customize this to only remove bits and pieces
    if(opts.facet.removeAxes) {
      ["x","y","z"].forEach(function(position){
        //work on axis scaling
        //assume if remove then same scales for all charts
        axisdomain = [];      
        subCharts.forEach(function(subChart){
          subChart.axes.forEach(function(axis){
            if (axis.position === position && !axis._hasCategories()){
              axisdomain.push(axis._scale.domain())
            }
          })
        });
        axisdomain = d3.extent([].concat.apply([], axisdomain));
        subCharts.forEach(function(subChart){
          subChart.axes.forEach(function(axis){
            if (axis.position === position && !axis._hasCategories()){
              axis.overrideMin = axisdomain[0];
              axis.overrideMax = axisdomain[1];
            }
          })
          subChart.draw(null,true)
        });
      })
      
      //evaluate which do not fall in column 1 or row 1 to remove
      var xpos = d3.extent(subCharts,function(d){return d.x});
      var ypos = d3.extent(subCharts,function(d){return d.y});    
      subCharts.filter(function(d){
        return d.x!=xpos[0];
      }).forEach(function(d){
        d.series[0]._dropLineOrigin = function(){
          return {"x" : xpos[0],"y" : ypos[1] + d._heightPixels()}
        }
        d.axes.forEach(function(axis){
          if (axis.position === "y"){
            //leave there for reference but set opacity 0
            if (axis.shapes) axis.shapes.style("opacity",0);
            if (axis.titleShape) axis.titleShape.style("opacity",0);
          }
        })
      });
      //now x for those not in row 1
      subCharts.filter(function(d){
        return d.y!=ypos[1];
      }).forEach(function(d){
        d.series[0]._dropLineOrigin = function(){
          return {"x" : xpos[0],"y" : ypos[1] + d._heightPixels()}
        }        
        d.axes.forEach(function(axis){
          if (axis.position === "x"){
            //leave there for reference but set opacity 0
            if (axis.shapes) axis.shapes.style("opacity",0);
            if (axis.titleShape) axis.titleShape.style("opacity",0);
          }
        })
      });
    }
  return subCharts;
  }
})();
</script>

<script>
  function updateChartColors( colors ){
    var dcolors = colors.map(function(col){
      return new dimple.color(col);
    })
    chart1ffc7dcf523b.forEach(function(cht){
      Object.keys(cht._assignedColors).forEach(function(k,i){
        cht._assignedColors[k] = dcolors[i % dcolors.length];
      })
      cht.defaultColors = dcolors;
      cht.draw();
    })
  }
</script></div>
      </div>
    </div>
    <script>
              d3.selectAll("input").on("change",function(){
                updateColors(  );
              });

              d3.selectAll("#scheme_buttons li a").on("click",function(){
                var selText = $(this).text();
               $(this).parents(".btn-group").find(".dropdown-toggle").html(selText+" <span class='caret'></span>");
               updateColors( );
              })

              d3.selectAll("#variation_buttons li a").on("click",function(){
                var selText = $(this).text();
               $(this).parents(".btn-group").find(".dropdown-toggle").html(selText+" <span class='caret'></span>");
               updateColors( );
              })

              ColorPicker(
                document.getElementById("slide"),
                document.getElementById("picker"),
                function(hex, hsv, rgb) {
                  document.getElementById("color_row").style.backgroundColor = chroma.hex(hex).css();
                  d3.selectAll("#slide,#picker").datum([hex,hsv,rgb]);
                  updateColors( );
                });
               
              function updateColors( ) {
                var hex = d3.selectAll("#slide,#picker").datum()[0];
                var hue = d3.selectAll("#slide,#picker").datum()[1].h;

                colors = (new ColorScheme).from_hue( hue ) //chroma.hex(hex).hsv()[0] )
                  //.from_hex( hex.replace("#", "" ).toUpperCase() )
                  .scheme(d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,""))
                  .variation(d3.select("#variation_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,""))
                  .colors().map(function(col){return "#" + col})

                if (d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,"") != "monochromatic")  colors.splice(0,0,hex);

                if (d3.select("#bez").node().checked){
                  if( d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,"") != "monochromatic"){
                    //if not monochromatic then will pick 0,3,4,...,length-1
                      colors = colors.filter(function(col,i){
                        if( (colors.length < 9 && i % 4 < 2 ) || (colors.length >= 9 && i % 4 === 0) ) { //|| i % 4 === 3 ) {
                          return col;
                        }
                      })
                  }
                  colors = chroma.interpolate.bezier( colors )
                }

                var scale = chroma.scale(colors)
                    .domain([0,+d3.select("#steps")[0][0].value],d3.select("#steps")[0][0].value)
                    .correctLightness( d3.select("#coL").node().checked );

                colors = d3.range(0,d3.select("#steps")[0][0].value,1)
                  .map(function(d){return scale(d).hex()});
                  

                var palette = d3.selectAll("#palette").selectAll("div").data(colors);

                palette
                  .enter()
                    .append("div")
                palette
                  .exit().remove();
                
                palette
                  .style("display", "inline-block")
                  .style("width",d3.format(".4%")(1/colors.length))
                  .style("height",d3.select("#picker").style("height"))
                  .style("background",function(d){return d;})

                updateChartColors(colors);
              }
        </script>
  </body>
</html> 