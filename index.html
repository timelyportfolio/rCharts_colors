<html>
  <head>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
  <script src="http://timelyportfolio.github.io/rCharts_dimple/js/d3-grid.js"></script>
  <script src="js/colorpicker.js"></script>
  <script src="js/chroma.js"></script>
  <script src="js/color-scheme.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="page-header">
        <h1>
          rCharts + dimple Color Picker
          <small>
            built with 
            <a href="http://shiny.rstudio.com/articles/html-tags.html" target="_blank"> Shiny Tags </a>
          </small>
        </h1>
      </div>
      <div id="color_row" class="row">
        <div class="col-md-3">
          <div id="picker" class="col-md-10" style="height:200px"></div>
          <div id="slide" class="col-md-2" style="height:200px"></div>
        </div>
        <div class="col-md-2">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>
                <a href="http://brianhann.com/color-scheme-js/" target="_blank">color-scheme.js</a>
              </h4>
            </div>
            <div class="panel-body">
              <div class="btn-group-vertical">
                <div class="btn-group">
                  <button type="button" id="scheme_selection" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Monochromatic
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" id="scheme_buttons">
                    <li>
                      <a href="#">Monochromatic</a>
                    </li>
                    <li>
                      <a href="#">Contrast</a>
                    </li>
                    <li>
                      <a href="#">Triade</a>
                    </li>
                    <li>
                      <a href="#">Tetrade</a>
                    </li>
                    <li>
                      <a href="#">Analogic</a>
                    </li>
                  </ul>
                </div>
                <div class="btn-group">
                  <button type="button" id="variation_selection" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Default
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" id="variation_buttons">
                    <li>
                      <a href="#">Default</a>
                    </li>
                    <li>
                      <a href="#">Pastel</a>
                    </li>
                    <li>
                      <a href="#">Soft</a>
                    </li>
                    <li>
                      <a href="#">Light</a>
                    </li>
                    <li>
                      <a href="#">Hard</a>
                    </li>
                    <li>
                      <a href="#">Pale</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-2">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4>
                <a href="https://vis4.net/blog/posts/mastering-multi-hued-color-scales" target="_blank">chroma.js</a>
              </h4>
            </div>
            <div class="panel-body">
              <label>
                Steps
                <input id="steps" checked="checked" type="number" value="9" style="width: 40px;"/>
              </label>
              <div class="checkbox">
                <label>
                  <input id="bez" type="checkbox"/>
                  Bezier
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input id="coL" type="checkbox"/>
                  Lightness
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-5" id="palette"></div>
      </div>
      <div id="chart_row" class="row">
        <div class="col-md-3">
          Select a color with the color picker above and then create
             a palette with some nice javascript color libraries.
          <hr/>
          This site was created entirely in R with rCharts, magrittr, and shiny based on
            an
          <a href="https://github.com/danielkrizian/rChartsDygraphs/issues/11" target="_blank">idea from Ramnath Vaidyanathan.</a>
           On the Javascript side of the world, we used 
          <ul class="nav nav-pills nav-stacked">
            <li>
              <a href="http://www.daviddurman.com/flexi-color-picker/" target="_blank">
                <span class="badge">1</span>
                flexi-color-picker
              </a>
            </li>
            <li>
              <a href="https://vis4.net/blog/posts/mastering-multi-hued-color-scales" target="_blank">
                <span class="badge">2</span>
                chroma.js
              </a>
            </li>
            <li>
              <a href="http://brianhann.com/color-scheme-js/" target="_blank">
                <span class="badge">3</span>
                color-scheme.js
              </a>
            </li>
            <li>
              <a href="http://dimplejs.org/" target="_blank">
                <span class="badge">4</span>
                dimple.js
              </a>
            </li>
            <li>
              <a href="http://dimplejs.org/" target="_blank">
                <span class="badge">5</span>
                dimple.js
              </a>
            </li>
            <li>
              <a href="http://getbootstrap.com/" target="_blank">
                <span class="badge">6</span>
                bootstrap
              </a>
            </li>
          </ul>
        </div>
        <div class="col-md-9">
<div id = 'chart2b8c50b34794' class = 'rChart dimple'></div>
<script>
var chart2b8c50b34794 = (function() {
  var opts = {
 "dom": "chart2b8c50b34794",
"width":    900,
"height":    500,
"xAxis": {
 "type": "addCategoryAxis",
"showPercent": false,
"orderRule": ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'] 
},
"yAxis": {
 "type": "addMeasureAxis",
"showPercent": false 
},
"zAxis": [],
"colorAxis": [],
"defaultColors": [],
"layers": [],
"legend": [],
"x": "x",
"y": "y",
"groups": "grp",
"type": "bar",
"id": "chart2b8c50b34794" 
},
    data = [{"x":"Apr","y":2746.16096098907,"grp":"A"},{"x":"Nov","y":7723.29103620723,"grp":"A"},{"x":"Sep","y":9657.42651280016,"grp":"A"},{"x":"Mar","y":6729.1800994426,"grp":"A"},{"x":"Sep","y":1909.53748347238,"grp":"A"},{"x":"Mar","y":8919.43382448517,"grp":"A"},{"x":"Nov","y":1665.12884385884,"grp":"A"},{"x":"May","y":4660.47152457759,"grp":"A"},{"x":"Mar","y":4521.62735839374,"grp":"A"},{"x":"Jul","y":3354.52310997061,"grp":"A"},{"x":"Oct","y":3267.28106825612,"grp":"A"},{"x":"Aug","y":5896.6437720228,"grp":"A"},{"x":"Apr","y":1499.52298123389,"grp":"A"},{"x":"Mar","y":3187.45050439611,"grp":"A"},{"x":"Feb","y":4224.76775269024,"grp":"A"},{"x":"Mar","y":6656.32960526273,"grp":"A"},{"x":"Sep","y":8742.02703638002,"grp":"A"},{"x":"Aug","y":3892.47118495405,"grp":"A"},{"x":"Jan","y":9399.01132322848,"grp":"A"},{"x":"Aug","y":8229.67355535366,"grp":"A"},{"x":"Jan","y":9712.19750586897,"grp":"A"},{"x":"Apr","y":8332.57110626437,"grp":"A"},{"x":"Jun","y":5061.13383034244,"grp":"A"},{"x":"Jul","y":1887.37407396548,"grp":"A"},{"x":"Aug","y":8479.98929512687,"grp":"A"},{"x":"Sep","y":1919.21506542712,"grp":"A"},{"x":"Sep","y":8911.89455613494,"grp":"A"},{"x":"Nov","y":6681.28554429859,"grp":"A"},{"x":"Feb","y":4585.12706845067,"grp":"A"},{"x":"Nov","y":8135.26666071266,"grp":"A"},{"x":"Mar","y":9874.42512204871,"grp":"A"},{"x":"Nov","y":4359.17965020053,"grp":"A"},{"x":"Mar","y":5694.25255479291,"grp":"A"},{"x":"Feb","y":8828.9177317638,"grp":"A"},{"x":"Feb","y":6755.41471876204,"grp":"A"},{"x":"Aug","y":4142.83862430602,"grp":"A"},{"x":"Sep","y":4582.05299917609,"grp":"A"},{"x":"Mar","y":7355.2819241304,"grp":"A"},{"x":"Jun","y":5700.23000007495,"grp":"A"},{"x":"Sep","y":1402.3003350012,"grp":"A"},{"x":"Apr","y":8766.21576515026,"grp":"A"},{"x":"Jul","y":1667.5977690611,"grp":"A"},{"x":"Oct","y":9296.41857394017,"grp":"A"},{"x":"Jun","y":3572.75803107768,"grp":"A"},{"x":"Jan","y":9458.34567793645,"grp":"A"},{"x":"Nov","y":3872.96338030137,"grp":"A"},{"x":"Sep","y":5225.72882915847,"grp":"A"},{"x":"Aug","y":3210.91887145303,"grp":"A"},{"x":"Jun","y":2020.10606206022,"grp":"A"},{"x":"Mar","y":5789.97989464551,"grp":"A"},{"x":"Jul","y":3493.68005944416,"grp":"A"},{"x":"Dec","y":6367.87095898762,"grp":"A"},{"x":"Aug","y":8138.91815301031,"grp":"A"},{"x":"Mar","y":3068.64611501805,"grp":"A"},{"x":"Sep","y":9725.50676111132,"grp":"A"},{"x":"Dec","y":8089.25763564184,"grp":"A"},{"x":"Sep","y":5421.58554610796,"grp":"A"},{"x":"Oct","y":7337.18268782832,"grp":"A"},{"x":"Jul","y":2633.31761141308,"grp":"A"},{"x":"Sep","y":7595.43389594182,"grp":"A"},{"x":"Sep","y":6900.35019419156,"grp":"A"},{"x":"Sep","y":2292.76325972751,"grp":"A"},{"x":"Nov","y":8392.15954579413,"grp":"A"},{"x":"May","y":9298.07144124061,"grp":"A"},{"x":"Aug","y":1655.61467339285,"grp":"A"},{"x":"Feb","y":4672.29049210437,"grp":"A"},{"x":"Jan","y":3545.11346458457,"grp":"A"},{"x":"Jul","y":1813.38262255304,"grp":"A"},{"x":"Sep","y":7931.56795040704,"grp":"A"},{"x":"Oct","y":8484.3736528419,"grp":"A"},{"x":"Oct","y":1252.54953373224,"grp":"A"},{"x":"Mar","y":8449.07702901401,"grp":"A"},{"x":"May","y":6119.43800002337,"grp":"A"},{"x":"Feb","y":2997.55958816968,"grp":"A"},{"x":"Jun","y":9024.76546331309,"grp":"A"},{"x":"Apr","y":9750.74290717021,"grp":"A"},{"x":"Aug","y":6594.22554075718,"grp":"A"},{"x":"Aug","y":3708.13726936467,"grp":"A"},{"x":"May","y":1246.71137682162,"grp":"A"},{"x":"Dec","y":6628.70240816846,"grp":"A"},{"x":"Oct","y":5529.95212120004,"grp":"A"},{"x":"Jun","y":5669.76675251499,"grp":"A"},{"x":"Apr","y":8261.83529710397,"grp":"A"},{"x":"Oct","y":6003.21701378562,"grp":"A"},{"x":"Sep","y":1241.62979773246,"grp":"A"},{"x":"Oct","y":6703.47782108001,"grp":"A"},{"x":"Apr","y":9109.00009283796,"grp":"A"},{"x":"Aug","y":2608.32599271089,"grp":"A"},{"x":"Aug","y":9557.18932976015,"grp":"A"},{"x":"Mar","y":2422.33798396774,"grp":"A"},{"x":"Mar","y":9086.66409994476,"grp":"A"},{"x":"Jun","y":4326.95993920788,"grp":"A"},{"x":"Apr","y":6631.70324475504,"grp":"A"},{"x":"Jun","y":3384.55797522329,"grp":"A"},{"x":"Jan","y":8024.24819814041,"grp":"A"},{"x":"Feb","y":6778.42131210491,"grp":"A"},{"x":"Aug","y":3306.6141337622,"grp":"A"},{"x":"May","y":1001.39503367245,"grp":"A"},{"x":"Jan","y":7780.41909169406,"grp":"A"},{"x":"Apr","y":5482.58611210622,"grp":"A"},{"x":"Mar","y":4543.28110208735,"grp":"A"},{"x":"Nov","y":1846.7663472984,"grp":"A"},{"x":"Mar","y":2995.53383304738,"grp":"A"},{"x":"Nov","y":9304.38692448661,"grp":"A"},{"x":"Apr","y":1279.63867550716,"grp":"A"},{"x":"Apr","y":6857.02882218175,"grp":"A"},{"x":"Dec","y":7662.82525868155,"grp":"A"},{"x":"Mar","y":8169.02411985211,"grp":"A"},{"x":"May","y":2706.64346427657,"grp":"A"},{"x":"Oct","y":6446.93900644779,"grp":"A"},{"x":"Sep","y":4357.68224205822,"grp":"A"},{"x":"Jun","y":6013.18153343163,"grp":"A"},{"x":"May","y":6119.95736998506,"grp":"A"},{"x":"Oct","y":4410.04868713208,"grp":"A"},{"x":"Mar","y":4526.4814903494,"grp":"A"},{"x":"Oct","y":1613.72322053649,"grp":"A"},{"x":"Jan","y":2000.27848570608,"grp":"A"},{"x":"May","y":3366.07681959867,"grp":"A"},{"x":"Jul","y":5381.98522152379,"grp":"A"},{"x":"Feb","y":9597.978688078,"grp":"A"},{"x":"Jul","y":2719.1259348765,"grp":"A"},{"x":"Mar","y":4662.25948720239,"grp":"A"},{"x":"Dec","y":2517.05250912346,"grp":"A"},{"x":"Jan","y":9273.55539705604,"grp":"A"},{"x":"Apr","y":2829.27885907702,"grp":"A"},{"x":"Nov","y":6976.23221948743,"grp":"A"},{"x":"May","y":8632.44752027094,"grp":"A"},{"x":"Jan","y":7148.06770742871,"grp":"A"},{"x":"May","y":1572.42773566395,"grp":"A"},{"x":"Aug","y":9522.96623494476,"grp":"A"},{"x":"Sep","y":4533.5397485178,"grp":"A"},{"x":"Jul","y":2452.0069330465,"grp":"A"},{"x":"Jul","y":6395.40624222718,"grp":"A"},{"x":"May","y":9252.13652895764,"grp":"A"},{"x":"Feb","y":3168.17383072339,"grp":"A"},{"x":"Apr","y":4166.68006987311,"grp":"A"},{"x":"Dec","y":1925.68005248904,"grp":"A"},{"x":"May","y":2297.29181132279,"grp":"A"},{"x":"Sep","y":2878.48499347456,"grp":"A"},{"x":"Apr","y":5131.17305305786,"grp":"A"},{"x":"Feb","y":5239.18381845579,"grp":"A"},{"x":"Apr","y":1303.17334551364,"grp":"A"},{"x":"May","y":9788.09522418305,"grp":"A"},{"x":"Jun","y":5904.79872468859,"grp":"A"},{"x":"May","y":7679.34333486483,"grp":"A"},{"x":"Aug","y":2600.48657888547,"grp":"A"},{"x":"Feb","y":5049.86271029338,"grp":"A"},{"x":"Sep","y":7824.63105977513,"grp":"A"},{"x":"Oct","y":3073.2188350521,"grp":"A"},{"x":"Oct","y":6177.38479562104,"grp":"A"},{"x":"May","y":9341.6237954516,"grp":"A"},{"x":"Jan","y":1707.52258226275,"grp":"A"},{"x":"Oct","y":8933.90937126242,"grp":"A"},{"x":"May","y":5548.58370893635,"grp":"A"},{"x":"Dec","y":1137.52737548202,"grp":"A"},{"x":"Nov","y":2121.65210652165,"grp":"A"},{"x":"Apr","y":7950.98099345341,"grp":"A"},{"x":"Jun","y":1690.895606298,"grp":"A"},{"x":"Jun","y":8536.42752626911,"grp":"A"},{"x":"Jun","y":1332.04275532626,"grp":"A"},{"x":"Jul","y":4357.54802683368,"grp":"A"},{"x":"Oct","y":1310.16591051593,"grp":"A"},{"x":"Nov","y":9439.23679110594,"grp":"A"},{"x":"Jun","y":6917.95819648542,"grp":"A"},{"x":"Feb","y":4484.99120166525,"grp":"A"},{"x":"May","y":5215.97220585682,"grp":"A"},{"x":"Aug","y":5377.75187427178,"grp":"A"},{"x":"Oct","y":1248.47947224043,"grp":"A"},{"x":"Apr","y":9200.13622427359,"grp":"A"},{"x":"Sep","y":8372.38293560222,"grp":"A"},{"x":"Feb","y":8111.41549842432,"grp":"A"},{"x":"Dec","y":8153.67886889726,"grp":"A"},{"x":"Jun","y":6636.66176283732,"grp":"A"},{"x":"Nov","y":1877.2448268719,"grp":"A"},{"x":"Aug","y":5142.76413968764,"grp":"A"},{"x":"Dec","y":6332.95271941461,"grp":"A"},{"x":"Jan","y":9541.67600907385,"grp":"A"},{"x":"Nov","y":3864.72132918425,"grp":"A"},{"x":"May","y":7808.55800816789,"grp":"A"},{"x":"Mar","y":9227.37800888717,"grp":"A"},{"x":"Jan","y":5800.46533071436,"grp":"A"},{"x":"Dec","y":7494.61456038989,"grp":"A"},{"x":"May","y":8624.59950032644,"grp":"A"},{"x":"Jan","y":2064.96067275293,"grp":"A"},{"x":"Mar","y":6178.10167884454,"grp":"A"},{"x":"Oct","y":5255.7872266043,"grp":"A"},{"x":"Jan","y":2573.53270845488,"grp":"A"},{"x":"May","y":2088.12617650256,"grp":"A"},{"x":"Oct","y":9500.7298043929,"grp":"A"},{"x":"May","y":7833.81912182085,"grp":"A"},{"x":"Dec","y":2280.17446678132,"grp":"A"},{"x":"Aug","y":8123.56270756572,"grp":"A"},{"x":"Nov","y":3260.33062650822,"grp":"A"},{"x":"Dec","y":2478.52970962413,"grp":"A"},{"x":"Sep","y":9235.84290337749,"grp":"A"},{"x":"May","y":1752.54051643424,"grp":"A"},{"x":"Mar","y":5420.69809744135,"grp":"A"},{"x":"Nov","y":8642.86342426203,"grp":"A"},{"x":"Mar","y":3846.49346629158,"grp":"A"},{"x":"Oct","y":3493.68714843877,"grp":"A"},{"x":"Mar","y":5881.69972086325,"grp":"B"},{"x":"Mar","y":5158.26306445524,"grp":"B"},{"x":"Aug","y":9319.7343442589,"grp":"B"},{"x":"Jun","y":2239.89761155099,"grp":"B"},{"x":"Apr","y":2795.45535054058,"grp":"B"},{"x":"Jun","y":4257.24239926785,"grp":"B"},{"x":"Oct","y":9472.37144969404,"grp":"B"},{"x":"May","y":1503.75409051776,"grp":"B"},{"x":"Sep","y":5197.68553553149,"grp":"B"},{"x":"Apr","y":6485.71398388594,"grp":"B"},{"x":"Apr","y":9024.68454861082,"grp":"B"},{"x":"Nov","y":5151.30122331902,"grp":"B"},{"x":"Aug","y":6625.87589211762,"grp":"B"},{"x":"Aug","y":4644.92444577627,"grp":"B"},{"x":"May","y":5523.51209125482,"grp":"B"},{"x":"Feb","y":3268.26081005856,"grp":"B"},{"x":"Apr","y":2910.7939528767,"grp":"B"},{"x":"Feb","y":5833.60618562438,"grp":"B"},{"x":"Aug","y":6702.24059349857,"grp":"B"},{"x":"Feb","y":6339.18686467223,"grp":"B"},{"x":"May","y":5786.39522078447,"grp":"B"},{"x":"Oct","y":1917.58488793857,"grp":"B"},{"x":"Feb","y":7386.67087326758,"grp":"B"},{"x":"Jul","y":2383.26712325215,"grp":"B"},{"x":"Oct","y":6604.41380692646,"grp":"B"},{"x":"Jan","y":3328.93620012328,"grp":"B"},{"x":"Nov","y":1300.22109253332,"grp":"B"},{"x":"Oct","y":9620.45641895384,"grp":"B"},{"x":"Dec","y":9619.35309437104,"grp":"B"},{"x":"Jan","y":9416.08057031408,"grp":"B"},{"x":"Jun","y":8899.2455014959,"grp":"B"},{"x":"Apr","y":4445.46689256094,"grp":"B"},{"x":"Mar","y":5914.84882356599,"grp":"B"},{"x":"Mar","y":3728.4194487147,"grp":"B"},{"x":"Jun","y":7577.34479545616,"grp":"B"},{"x":"Jul","y":7451.84051408432,"grp":"B"},{"x":"Feb","y":4451.76044455729,"grp":"B"},{"x":"Oct","y":2518.83512828499,"grp":"B"},{"x":"Aug","y":5666.78452375345,"grp":"B"},{"x":"May","y":2913.87124080211,"grp":"B"},{"x":"Jun","y":3085.71926807053,"grp":"B"},{"x":"May","y":3841.96996269748,"grp":"B"},{"x":"Jan","y":8553.87056013569,"grp":"B"},{"x":"Mar","y":8918.70814235881,"grp":"B"},{"x":"Nov","y":5223.73016434722,"grp":"B"},{"x":"Oct","y":7683.68667154573,"grp":"B"},{"x":"May","y":5615.21292617545,"grp":"B"},{"x":"Apr","y":2040.7985188067,"grp":"B"},{"x":"Dec","y":6909.40020629205,"grp":"B"},{"x":"Jan","y":9764.03689268045,"grp":"B"},{"x":"Apr","y":9528.30723393708,"grp":"B"},{"x":"Aug","y":5278.56665360741,"grp":"B"},{"x":"May","y":5287.14423440397,"grp":"B"},{"x":"Jul","y":4717.92503679171,"grp":"B"},{"x":"Sep","y":9896.2156814523,"grp":"B"},{"x":"Jan","y":3042.24062222056,"grp":"B"},{"x":"Nov","y":4631.182361627,"grp":"B"},{"x":"Mar","y":7661.66684613563,"grp":"B"},{"x":"Oct","y":5602.46331593953,"grp":"B"},{"x":"May","y":1708.74933456071,"grp":"B"},{"x":"Oct","y":2092.06917043775,"grp":"B"},{"x":"Dec","y":8433.65750811063,"grp":"B"},{"x":"Mar","y":3489.53153286129,"grp":"B"},{"x":"May","y":2269.98070417903,"grp":"B"},{"x":"Oct","y":3887.54308689386,"grp":"B"},{"x":"Aug","y":3616.0394276958,"grp":"B"},{"x":"Oct","y":3651.56236500479,"grp":"B"},{"x":"Mar","y":9211.8278266862,"grp":"B"},{"x":"Mar","y":9938.17392340861,"grp":"B"},{"x":"Apr","y":5189.9207206443,"grp":"B"},{"x":"Jul","y":6835.63737338409,"grp":"B"},{"x":"Nov","y":8079.07109195367,"grp":"B"},{"x":"Apr","y":5286.48853488266,"grp":"B"},{"x":"Aug","y":4279.12307041697,"grp":"B"},{"x":"Apr","y":8989.21092622913,"grp":"B"},{"x":"Sep","y":3903.02234143019,"grp":"B"},{"x":"Dec","y":3667.06652427092,"grp":"B"},{"x":"Aug","y":1628.8453724701,"grp":"B"},{"x":"Jun","y":4354.4512342196,"grp":"B"},{"x":"Sep","y":7496.53482506983,"grp":"B"},{"x":"Jan","y":7759.24108177423,"grp":"B"},{"x":"Jun","y":9300.82988995127,"grp":"B"},{"x":"Apr","y":7765.85119101219,"grp":"B"},{"x":"Jun","y":6090.94490204006,"grp":"B"},{"x":"Nov","y":1229.52568414621,"grp":"B"},{"x":"Mar","y":7992.8913495969,"grp":"B"},{"x":"Oct","y":6734.71829947084,"grp":"B"},{"x":"Feb","y":3878.1448842492,"grp":"B"},{"x":"Jul","y":5745.6880051177,"grp":"B"},{"x":"Jun","y":9017.31850905344,"grp":"B"},{"x":"Oct","y":7488.9552523382,"grp":"B"},{"x":"Jul","y":5872.62001587078,"grp":"B"},{"x":"Feb","y":6336.56468894333,"grp":"B"},{"x":"Dec","y":6458.94777378999,"grp":"B"},{"x":"Feb","y":6517.60882488452,"grp":"B"},{"x":"Feb","y":4818.39280389249,"grp":"B"},{"x":"Oct","y":7080.36089804955,"grp":"B"},{"x":"Dec","y":7874.97684592381,"grp":"B"},{"x":"Apr","y":2166.52024560608,"grp":"B"},{"x":"Apr","y":7936.66415172629,"grp":"B"},{"x":"Oct","y":3241.70987657271,"grp":"B"},{"x":"Mar","y":4735.14902009629,"grp":"B"},{"x":"Sep","y":7923.43889572658,"grp":"B"},{"x":"Jul","y":2720.84113629535,"grp":"B"},{"x":"Jun","y":9916.35996801779,"grp":"B"},{"x":"Jun","y":1816.79818313569,"grp":"B"},{"x":"Jun","y":8172.66892339103,"grp":"B"},{"x":"Sep","y":8589.87422892824,"grp":"B"},{"x":"Oct","y":4679.08261227421,"grp":"B"},{"x":"Feb","y":8846.64794639684,"grp":"B"},{"x":"Aug","y":8197.13074923493,"grp":"B"},{"x":"Jan","y":2150.40065348148,"grp":"B"},{"x":"Mar","y":1120.62281393446,"grp":"B"},{"x":"Mar","y":7240.54027255625,"grp":"B"},{"x":"Mar","y":6330.89453051798,"grp":"B"},{"x":"May","y":1631.90708053298,"grp":"B"},{"x":"Apr","y":2745.3431240283,"grp":"B"},{"x":"Mar","y":6660.14416958205,"grp":"B"},{"x":"Aug","y":8788.25232712552,"grp":"B"},{"x":"Jun","y":7668.92810980789,"grp":"B"},{"x":"Mar","y":4175.96147907898,"grp":"B"},{"x":"Feb","y":3295.09132402018,"grp":"B"},{"x":"Feb","y":8113.40110213496,"grp":"B"},{"x":"Feb","y":6644.44001601078,"grp":"B"},{"x":"Jul","y":1388.92893004231,"grp":"B"},{"x":"Sep","y":8964.14030180313,"grp":"B"},{"x":"Apr","y":6010.09247940965,"grp":"B"},{"x":"Feb","y":8740.90628582053,"grp":"B"},{"x":"Oct","y":5782.43704722263,"grp":"B"},{"x":"Mar","y":4551.32629163563,"grp":"B"},{"x":"Oct","y":6041.99147364125,"grp":"B"},{"x":"Sep","y":4952.31253700331,"grp":"B"},{"x":"Apr","y":8413.82619133219,"grp":"B"},{"x":"Aug","y":6390.46329562552,"grp":"B"},{"x":"Feb","y":8215.30235488899,"grp":"B"},{"x":"Jan","y":5431.39338074252,"grp":"B"},{"x":"Nov","y":7854.60758279078,"grp":"B"},{"x":"Feb","y":5224.12777459249,"grp":"B"},{"x":"Sep","y":4826.98198105209,"grp":"B"},{"x":"Oct","y":2419.44672819227,"grp":"B"},{"x":"Jun","y":1332.3914760258,"grp":"B"},{"x":"Feb","y":9700.79603046179,"grp":"B"},{"x":"Feb","y":3057.98050365411,"grp":"B"},{"x":"Dec","y":9865.38147600368,"grp":"B"},{"x":"Apr","y":7949.80699475855,"grp":"B"},{"x":"Oct","y":4812.93062772602,"grp":"B"},{"x":"May","y":7930.27047789656,"grp":"B"},{"x":"Feb","y":4797.1665142104,"grp":"B"},{"x":"Oct","y":2899.74938100204,"grp":"B"},{"x":"May","y":4294.06037623994,"grp":"B"},{"x":"Sep","y":5263.64043075591,"grp":"B"},{"x":"Aug","y":2707.17115746811,"grp":"B"},{"x":"Oct","y":2652.83590182662,"grp":"B"},{"x":"Sep","y":9416.22991696931,"grp":"B"},{"x":"May","y":1783.58438261785,"grp":"B"},{"x":"Sep","y":1048.13035903499,"grp":"B"},{"x":"Apr","y":7970.70961724967,"grp":"B"},{"x":"Aug","y":6545.5208432395,"grp":"B"},{"x":"Jan","y":8194.13158902898,"grp":"B"},{"x":"Feb","y":5965.48080351204,"grp":"B"},{"x":"Feb","y":5944.41937538795,"grp":"B"},{"x":"Feb","y":1301.06157320552,"grp":"B"},{"x":"Jun","y":8245.17803522758,"grp":"B"},{"x":"Nov","y":5046.71462043189,"grp":"B"},{"x":"Apr","y":2071.10182708129,"grp":"B"},{"x":"Aug","y":3958.13939184882,"grp":"B"},{"x":"Sep","y":9503.62435006537,"grp":"B"},{"x":"Jan","y":5417.47719817795,"grp":"B"},{"x":"Mar","y":5308.02682414651,"grp":"B"},{"x":"Dec","y":2077.66392477788,"grp":"B"},{"x":"Feb","y":3426.28321913071,"grp":"B"},{"x":"Aug","y":7531.76402486861,"grp":"B"},{"x":"Dec","y":8579.8042146489,"grp":"B"},{"x":"Sep","y":6365.38333795033,"grp":"B"},{"x":"Oct","y":9702.59259501472,"grp":"B"},{"x":"May","y":5302.34658229165,"grp":"B"},{"x":"May","y":9763.74702551402,"grp":"B"},{"x":"Feb","y":2730.09865707718,"grp":"B"},{"x":"Jun","y":4285.59835255146,"grp":"B"},{"x":"Jun","y":7927.12218686938,"grp":"B"},{"x":"Jun","y":9513.8284873683,"grp":"B"},{"x":"Mar","y":2385.61335625127,"grp":"B"},{"x":"Jul","y":8197.97791028395,"grp":"B"},{"x":"Nov","y":7625.64392620698,"grp":"B"},{"x":"Feb","y":7151.7195161432,"grp":"B"},{"x":"Feb","y":8092.94106299058,"grp":"B"},{"x":"Aug","y":5574.96263110079,"grp":"B"},{"x":"Jul","y":7267.41971587762,"grp":"B"},{"x":"Aug","y":6677.2917539347,"grp":"B"},{"x":"Aug","y":2297.31410718523,"grp":"B"},{"x":"Aug","y":6326.9620873034,"grp":"B"},{"x":"Jul","y":6417.8555898834,"grp":"B"},{"x":"Aug","y":3972.45906246826,"grp":"B"},{"x":"Apr","y":5437.64153006487,"grp":"B"},{"x":"Feb","y":4365.04973378032,"grp":"B"},{"x":"May","y":3745.7310250029,"grp":"B"},{"x":"Aug","y":2878.15786455758,"grp":"B"},{"x":"Apr","y":3689.30504191667,"grp":"B"},{"x":"Sep","y":1889.21955320984,"grp":"B"},{"x":"Dec","y":3334.14978161454,"grp":"B"},{"x":"Oct","y":6022.43084623478,"grp":"C"},{"x":"Jan","y":9026.62867447361,"grp":"C"},{"x":"Apr","y":8817.74380616844,"grp":"C"},{"x":"Jul","y":9216.82219207287,"grp":"C"},{"x":"Feb","y":1045.46420136467,"grp":"C"},{"x":"May","y":7683.57807560824,"grp":"C"},{"x":"Jan","y":7575.85151540115,"grp":"C"},{"x":"Nov","y":7611.68780177832,"grp":"C"},{"x":"Nov","y":5812.37428635359,"grp":"C"},{"x":"Feb","y":4553.69582632557,"grp":"C"},{"x":"Aug","y":3234.86112616956,"grp":"C"},{"x":"Nov","y":4923.12448075973,"grp":"C"},{"x":"May","y":8579.17246432044,"grp":"C"},{"x":"Apr","y":5409.02007371187,"grp":"C"},{"x":"Nov","y":1853.4204447642,"grp":"C"},{"x":"Oct","y":4311.38518964872,"grp":"C"},{"x":"Aug","y":7004.07533231191,"grp":"C"},{"x":"Apr","y":4926.87054607086,"grp":"C"},{"x":"Oct","y":8845.28780239634,"grp":"C"},{"x":"Sep","y":5802.26395931095,"grp":"C"},{"x":"Aug","y":8164.43459619768,"grp":"C"},{"x":"Jan","y":2579.51275422238,"grp":"C"},{"x":"May","y":9576.90623984672,"grp":"C"},{"x":"Sep","y":6419.22917007469,"grp":"C"},{"x":"May","y":6602.58078319021,"grp":"C"},{"x":"Jul","y":7459.32311657816,"grp":"C"},{"x":"Jul","y":9362.52973927185,"grp":"C"},{"x":"Apr","y":6845.35569348373,"grp":"C"},{"x":"Nov","y":7203.96579615772,"grp":"C"},{"x":"Jun","y":3991.34623119608,"grp":"C"},{"x":"Aug","y":3980.68235907704,"grp":"C"},{"x":"Apr","y":9258.18488723598,"grp":"C"},{"x":"Sep","y":8065.90558006428,"grp":"C"},{"x":"Sep","y":5958.83911754936,"grp":"C"},{"x":"Jun","y":6999.75795228966,"grp":"C"},{"x":"May","y":9476.68947512284,"grp":"C"},{"x":"Sep","y":2150.69185337052,"grp":"C"},{"x":"Apr","y":8556.97410018183,"grp":"C"},{"x":"Dec","y":2383.09134845622,"grp":"C"},{"x":"Jan","y":3366.32746155374,"grp":"C"},{"x":"Aug","y":6298.62891812809,"grp":"C"},{"x":"Apr","y":5666.72358731739,"grp":"C"},{"x":"Nov","y":5022.6043399889,"grp":"C"},{"x":"Nov","y":7438.39372228831,"grp":"C"},{"x":"Jun","y":8901.64932026528,"grp":"C"},{"x":"Apr","y":2137.79735984281,"grp":"C"},{"x":"Feb","y":8067.2694016248,"grp":"C"},{"x":"Feb","y":4302.26810765453,"grp":"C"},{"x":"Oct","y":7325.60165738687,"grp":"C"},{"x":"Sep","y":1698.88620451093,"grp":"C"},{"x":"Feb","y":4730.2979810629,"grp":"C"},{"x":"May","y":3878.47153958865,"grp":"C"},{"x":"Aug","y":6772.2438138444,"grp":"C"},{"x":"Jul","y":6110.49936455674,"grp":"C"},{"x":"Nov","y":7558.17989446223,"grp":"C"},{"x":"Apr","y":2476.24362725765,"grp":"C"},{"x":"May","y":7665.72181601077,"grp":"C"},{"x":"Jan","y":8617.92692076415,"grp":"C"},{"x":"Sep","y":6583.58384924941,"grp":"C"},{"x":"Feb","y":2332.50874839723,"grp":"C"},{"x":"Sep","y":8419.38092885539,"grp":"C"},{"x":"Oct","y":8027.34269411303,"grp":"C"},{"x":"Jun","y":5982.5896047987,"grp":"C"},{"x":"Dec","y":5504.22592507675,"grp":"C"},{"x":"Nov","y":7491.54157028534,"grp":"C"},{"x":"Jul","y":9969.97466497123,"grp":"C"},{"x":"May","y":6103.84478094056,"grp":"C"},{"x":"Jun","y":1141.35636296123,"grp":"C"},{"x":"Jun","y":5829.2809035629,"grp":"C"},{"x":"Jul","y":3351.75369563513,"grp":"C"},{"x":"Mar","y":3644.56147677265,"grp":"C"},{"x":"Jun","y":4734.89264701493,"grp":"C"},{"x":"Nov","y":9753.25361196883,"grp":"C"},{"x":"Dec","y":8102.20852470957,"grp":"C"},{"x":"Mar","y":2262.07168912515,"grp":"C"},{"x":"Nov","y":9826.13405468874,"grp":"C"},{"x":"Oct","y":1959.56347486936,"grp":"C"},{"x":"Nov","y":4432.01533984393,"grp":"C"},{"x":"Apr","y":7221.41550621018,"grp":"C"},{"x":"Jul","y":9940.83038740791,"grp":"C"},{"x":"Feb","y":4287.28820709512,"grp":"C"},{"x":"Jan","y":9934.17368945666,"grp":"C"},{"x":"Sep","y":4522.28126837872,"grp":"C"},{"x":"Oct","y":1539.04747054912,"grp":"C"},{"x":"Aug","y":5112.4774988275,"grp":"C"},{"x":"Oct","y":3839.19296064414,"grp":"C"},{"x":"Jul","y":1653.89876789413,"grp":"C"},{"x":"Aug","y":1300.73469993658,"grp":"C"},{"x":"Apr","y":7084.10409255885,"grp":"C"},{"x":"Dec","y":7537.65698056668,"grp":"C"},{"x":"Jul","y":5479.05092081055,"grp":"C"},{"x":"May","y":7293.33323077299,"grp":"C"},{"x":"Aug","y":7021.28813834861,"grp":"C"},{"x":"Aug","y":9011.60148321651,"grp":"C"},{"x":"May","y":5513.5107205715,"grp":"C"},{"x":"Feb","y":2735.72416929528,"grp":"C"},{"x":"Feb","y":1696.17712730542,"grp":"C"},{"x":"May","y":9694.5488806814,"grp":"C"},{"x":"Oct","y":4170.57396681048,"grp":"C"},{"x":"Mar","y":8717.41129364818,"grp":"C"},{"x":"May","y":6826.7212077044,"grp":"C"},{"x":"Oct","y":4785.12592706829,"grp":"C"},{"x":"Apr","y":2056.99161603116,"grp":"C"},{"x":"Apr","y":4322.60992843658,"grp":"C"},{"x":"Jul","y":8391.8623465579,"grp":"C"},{"x":"Oct","y":6215.47656832263,"grp":"C"},{"x":"Feb","y":9945.76997705735,"grp":"C"},{"x":"May","y":6618.40769601986,"grp":"C"},{"x":"Aug","y":5792.2089213971,"grp":"C"},{"x":"Apr","y":4694.00365510955,"grp":"C"},{"x":"Sep","y":8198.66070011631,"grp":"C"},{"x":"Feb","y":5733.32710564137,"grp":"C"},{"x":"Apr","y":6094.35531822965,"grp":"C"},{"x":"Mar","y":1493.40806645341,"grp":"C"},{"x":"Nov","y":3759.71742067486,"grp":"C"},{"x":"Aug","y":9927.96052829362,"grp":"C"},{"x":"Aug","y":3248.68461326696,"grp":"C"},{"x":"Aug","y":5832.218806725,"grp":"C"},{"x":"Feb","y":2312.66328715719,"grp":"C"},{"x":"Feb","y":8174.09835429862,"grp":"C"},{"x":"Feb","y":4924.7316562105,"grp":"C"},{"x":"Apr","y":5236.67138698511,"grp":"C"},{"x":"May","y":9058.44998732209,"grp":"C"},{"x":"Jun","y":7832.18577387743,"grp":"C"},{"x":"Sep","y":7677.17249318957,"grp":"C"},{"x":"Feb","y":9415.85445171222,"grp":"C"},{"x":"Sep","y":9812.40842421539,"grp":"C"},{"x":"Aug","y":5497.77156626806,"grp":"C"},{"x":"Apr","y":5139.96591884643,"grp":"C"},{"x":"Aug","y":9002.46088160202,"grp":"C"},{"x":"Sep","y":8531.31156042218,"grp":"C"},{"x":"Aug","y":5401.63248637691,"grp":"C"},{"x":"Sep","y":8065.34227845259,"grp":"C"},{"x":"Jun","y":6950.2893993631,"grp":"C"},{"x":"May","y":8956.45233220421,"grp":"C"},{"x":"Jun","y":5137.39086617716,"grp":"C"},{"x":"Aug","y":2207.24106719717,"grp":"C"},{"x":"Apr","y":8898.47447327338,"grp":"C"},{"x":"Jun","y":6180.26872980408,"grp":"C"},{"x":"Apr","y":1093.0881279055,"grp":"C"},{"x":"Nov","y":7404.8459616024,"grp":"C"},{"x":"Oct","y":7377.37538246438,"grp":"C"},{"x":"Apr","y":7315.36437384784,"grp":"C"},{"x":"Feb","y":8252.64476449229,"grp":"C"},{"x":"Jul","y":4771.18157083169,"grp":"C"},{"x":"Jan","y":2382.32622737996,"grp":"C"},{"x":"Jul","y":4753.32547258586,"grp":"C"},{"x":"Jun","y":3480.22762243636,"grp":"C"},{"x":"Mar","y":6780.88622866198,"grp":"C"},{"x":"Oct","y":8765.90490550734,"grp":"C"},{"x":"Feb","y":9478.97892282344,"grp":"C"},{"x":"Jul","y":2744.07626851462,"grp":"C"},{"x":"Apr","y":1203.4032503143,"grp":"C"},{"x":"Feb","y":3503.54374060407,"grp":"C"},{"x":"Feb","y":3679.6300415881,"grp":"C"},{"x":"Feb","y":1940.4214292299,"grp":"C"},{"x":"Mar","y":5780.09952930734,"grp":"C"},{"x":"Nov","y":2682.48962098733,"grp":"C"},{"x":"Jul","y":8078.37868388742,"grp":"C"},{"x":"May","y":8233.12511621043,"grp":"C"},{"x":"Sep","y":9069.51065873727,"grp":"C"},{"x":"Oct","y":4445.56594779715,"grp":"C"},{"x":"Mar","y":1164.74847565405,"grp":"C"},{"x":"Nov","y":3565.44203567319,"grp":"C"},{"x":"Mar","y":3820.90556109324,"grp":"C"},{"x":"Dec","y":7950.07410505787,"grp":"C"},{"x":"Aug","y":5643.63076724112,"grp":"C"},{"x":"Sep","y":3494.93334256113,"grp":"C"},{"x":"Oct","y":6293.68940810673,"grp":"C"},{"x":"Feb","y":8891.14278694615,"grp":"C"},{"x":"May","y":8999.30015183054,"grp":"C"},{"x":"Feb","y":5714.08779220656,"grp":"C"},{"x":"Feb","y":9041.47236072458,"grp":"C"},{"x":"Nov","y":1401.82087337598,"grp":"C"},{"x":"Nov","y":5161.8766495958,"grp":"C"},{"x":"Mar","y":4109.90873351693,"grp":"C"},{"x":"Jul","y":4855.31061352231,"grp":"C"},{"x":"Oct","y":9124.89124038257,"grp":"C"},{"x":"Aug","y":3543.52115443908,"grp":"C"},{"x":"Feb","y":7725.66664568149,"grp":"C"},{"x":"Jan","y":1438.21742502041,"grp":"C"},{"x":"Aug","y":3755.92034938745,"grp":"C"},{"x":"Mar","y":1715.13411728665,"grp":"C"},{"x":"Nov","y":9579.32259375229,"grp":"C"},{"x":"Oct","y":2142.36732642166,"grp":"C"},{"x":"Sep","y":2570.56042272598,"grp":"C"},{"x":"Apr","y":2030.3708256688,"grp":"C"},{"x":"Jun","y":2984.87508436665,"grp":"C"},{"x":"Aug","y":9647.78305147775,"grp":"C"},{"x":"Nov","y":1157.14043797925,"grp":"C"},{"x":"Feb","y":7621.05664052069,"grp":"C"},{"x":"Jul","y":6225.62149795704,"grp":"C"},{"x":"Feb","y":9994.94330049492,"grp":"C"},{"x":"Nov","y":4956.83518564329,"grp":"C"},{"x":"Feb","y":2371.86264921911,"grp":"C"},{"x":"Jan","y":3158.50418433547,"grp":"C"},{"x":"Feb","y":7684.3690359965,"grp":"C"},{"x":"May","y":6234.83936395496,"grp":"C"},{"x":"May","y":5366.95954948664,"grp":"C"},{"x":"Jul","y":1729.68465904705,"grp":"C"},{"x":"Feb","y":7254.5569750946,"grp":"D"},{"x":"Jun","y":2913.25808363035,"grp":"D"},{"x":"Nov","y":4171.7966622673,"grp":"D"},{"x":"Jun","y":8035.92666820623,"grp":"D"},{"x":"Apr","y":3542.05394210294,"grp":"D"},{"x":"Aug","y":1720.8361227531,"grp":"D"},{"x":"Jul","y":2065.28898142278,"grp":"D"},{"x":"Jan","y":6688.4653295856,"grp":"D"},{"x":"Sep","y":4532.99042792059,"grp":"D"},{"x":"Oct","y":6854.36717607081,"grp":"D"},{"x":"Nov","y":8063.37830424309,"grp":"D"},{"x":"Mar","y":1473.39534643106,"grp":"D"},{"x":"Mar","y":7834.80185386725,"grp":"D"},{"x":"May","y":3836.53644425794,"grp":"D"},{"x":"Oct","y":4699.87694476731,"grp":"D"},{"x":"Jan","y":6755.12672704645,"grp":"D"},{"x":"May","y":7791.01734817959,"grp":"D"},{"x":"Aug","y":8641.80849888362,"grp":"D"},{"x":"Nov","y":2038.68665429764,"grp":"D"},{"x":"Apr","y":5152.53480896354,"grp":"D"},{"x":"Aug","y":9245.61755615287,"grp":"D"},{"x":"Jul","y":2502.85604200326,"grp":"D"},{"x":"Oct","y":5343.14112900756,"grp":"D"},{"x":"Sep","y":7180.01122632995,"grp":"D"},{"x":"Sep","y":9818.10413696803,"grp":"D"},{"x":"Mar","y":3265.50248917192,"grp":"D"},{"x":"Feb","y":2288.00795669667,"grp":"D"},{"x":"Sep","y":5661.04581183754,"grp":"D"},{"x":"Mar","y":6928.6521282047,"grp":"D"},{"x":"Dec","y":1273.37236679159,"grp":"D"},{"x":"Mar","y":3305.72261987254,"grp":"D"},{"x":"Feb","y":9777.22352487035,"grp":"D"},{"x":"Sep","y":3014.30188026279,"grp":"D"},{"x":"Feb","y":6645.16755682416,"grp":"D"},{"x":"Apr","y":1984.06438343227,"grp":"D"},{"x":"Feb","y":6285.73793242686,"grp":"D"},{"x":"Dec","y":2163.77685288899,"grp":"D"},{"x":"Nov","y":4019.04235058464,"grp":"D"},{"x":"Oct","y":7522.36574888229,"grp":"D"},{"x":"Oct","y":8433.95459838212,"grp":"D"},{"x":"Apr","y":6568.56427295133,"grp":"D"},{"x":"Mar","y":2845.92004236765,"grp":"D"},{"x":"Jul","y":1521.70722815208,"grp":"D"},{"x":"Dec","y":8137.31609471142,"grp":"D"},{"x":"Oct","y":6273.02680979483,"grp":"D"},{"x":"Jul","y":6168.02002629265,"grp":"D"},{"x":"May","y":2080.43385460041,"grp":"D"},{"x":"Dec","y":6033.84308191016,"grp":"D"},{"x":"May","y":1702.31947395951,"grp":"D"},{"x":"May","y":5380.61935687438,"grp":"D"},{"x":"Mar","y":1885.90979529545,"grp":"D"},{"x":"Sep","y":2940.4119043611,"grp":"D"},{"x":"May","y":8979.87317387015,"grp":"D"},{"x":"Feb","y":7478.11846784316,"grp":"D"},{"x":"Nov","y":5787.2172256466,"grp":"D"},{"x":"Mar","y":8306.3567543868,"grp":"D"},{"x":"Sep","y":1789.66966317967,"grp":"D"},{"x":"Mar","y":5822.09454057738,"grp":"D"},{"x":"May","y":1034.37958075665,"grp":"D"},{"x":"Nov","y":6906.9607979618,"grp":"D"},{"x":"Oct","y":7620.44167076238,"grp":"D"},{"x":"Nov","y":1460.06966894493,"grp":"D"},{"x":"Dec","y":6723.02533080801,"grp":"D"},{"x":"Dec","y":8258.08845227584,"grp":"D"},{"x":"Sep","y":5306.41709011979,"grp":"D"},{"x":"Feb","y":7538.55013940483,"grp":"D"},{"x":"May","y":4838.23100011796,"grp":"D"},{"x":"Aug","y":3823.20901495405,"grp":"D"},{"x":"Mar","y":3674.52791216783,"grp":"D"},{"x":"Aug","y":7313.51660215296,"grp":"D"},{"x":"Jun","y":3469.41402019002,"grp":"D"},{"x":"Jun","y":3046.08274623752,"grp":"D"},{"x":"May","y":8613.3339710068,"grp":"D"},{"x":"May","y":2983.30031335354,"grp":"D"},{"x":"Oct","y":5508.45623598434,"grp":"D"},{"x":"Apr","y":3018.44066078775,"grp":"D"},{"x":"Nov","y":6160.86003486998,"grp":"D"},{"x":"Jul","y":8953.27315595932,"grp":"D"},{"x":"Sep","y":6112.01588134281,"grp":"D"},{"x":"Feb","y":3443.11559782363,"grp":"D"},{"x":"Nov","y":9522.52664603293,"grp":"D"},{"x":"Nov","y":7773.60153663903,"grp":"D"},{"x":"Jan","y":5523.19856197573,"grp":"D"},{"x":"Jun","y":8090.45108244754,"grp":"D"},{"x":"Apr","y":3940.87756425142,"grp":"D"},{"x":"Mar","y":1186.15335226059,"grp":"D"},{"x":"Nov","y":5503.83194838651,"grp":"D"},{"x":"Nov","y":7887.1178671252,"grp":"D"},{"x":"Oct","y":1206.23133378103,"grp":"D"},{"x":"Mar","y":7412.56879991852,"grp":"D"},{"x":"Apr","y":3137.70255958661,"grp":"D"},{"x":"Jul","y":7098.93309371546,"grp":"D"},{"x":"Jun","y":9053.03952540271,"grp":"D"},{"x":"Sep","y":2278.80054921843,"grp":"D"},{"x":"Dec","y":6129.50283219107,"grp":"D"},{"x":"Dec","y":5549.67019846663,"grp":"D"},{"x":"Oct","y":5229.16709631681,"grp":"D"},{"x":"Mar","y":8906.49121045135,"grp":"D"},{"x":"Nov","y":5199.31968813762,"grp":"D"},{"x":"Feb","y":2660.09955643676,"grp":"D"},{"x":"Aug","y":1263.17235338502,"grp":"D"},{"x":"Nov","y":9157.76495775208,"grp":"D"},{"x":"Jun","y":1123.5723993741,"grp":"D"},{"x":"May","y":8867.36290017143,"grp":"D"},{"x":"Jul","y":1831.71576214954,"grp":"D"},{"x":"May","y":4800.18038465641,"grp":"D"},{"x":"Jul","y":8505.37327490747,"grp":"D"},{"x":"Oct","y":9453.50833493285,"grp":"D"},{"x":"Jul","y":3146.96079073474,"grp":"D"},{"x":"Dec","y":5080.93735901639,"grp":"D"},{"x":"Jun","y":9559.30840689689,"grp":"D"},{"x":"Sep","y":7041.48247954436,"grp":"D"},{"x":"Aug","y":8627.65706982464,"grp":"D"},{"x":"Oct","y":5267.15927314945,"grp":"D"},{"x":"Jan","y":3093.51062844507,"grp":"D"},{"x":"Oct","y":6344.60397134535,"grp":"D"},{"x":"Jan","y":5335.73275455274,"grp":"D"},{"x":"Feb","y":5978.16372313537,"grp":"D"},{"x":"Apr","y":3994.93805901147,"grp":"D"},{"x":"Jan","y":8694.2203277722,"grp":"D"},{"x":"Sep","y":3007.9842240084,"grp":"D"},{"x":"Jan","y":6079.08340264112,"grp":"D"},{"x":"Mar","y":5504.68202214688,"grp":"D"},{"x":"Nov","y":2199.35392891057,"grp":"D"},{"x":"Jun","y":5669.7114193812,"grp":"D"},{"x":"May","y":5332.48519035988,"grp":"D"},{"x":"Jun","y":4705.85865853354,"grp":"D"},{"x":"Aug","y":4680.06561463699,"grp":"D"},{"x":"Feb","y":1966.57814504579,"grp":"D"},{"x":"Jul","y":3140.16857626848,"grp":"D"},{"x":"Nov","y":3019.65756644495,"grp":"D"},{"x":"Jan","y":4086.93212852813,"grp":"D"},{"x":"Aug","y":5264.56765993498,"grp":"D"},{"x":"Oct","y":2271.0046605207,"grp":"D"},{"x":"Jun","y":5768.84068455547,"grp":"D"},{"x":"Dec","y":2564.4841066096,"grp":"D"},{"x":"Jul","y":2676.4103481546,"grp":"D"},{"x":"Oct","y":4984.40659907646,"grp":"D"},{"x":"Nov","y":4907.57703944109,"grp":"D"},{"x":"Nov","y":7877.95389047824,"grp":"D"},{"x":"Dec","y":5902.05482486635,"grp":"D"},{"x":"Jan","y":9575.96695120446,"grp":"D"},{"x":"Nov","y":9231.36802110821,"grp":"D"},{"x":"Aug","y":7855.48273520544,"grp":"D"},{"x":"May","y":6651.64166130126,"grp":"D"},{"x":"Apr","y":1946.50064548478,"grp":"D"},{"x":"Oct","y":8315.98580721766,"grp":"D"},{"x":"Aug","y":6907.14856726117,"grp":"D"},{"x":"Sep","y":9508.59226216562,"grp":"D"},{"x":"May","y":1328.43104144558,"grp":"D"},{"x":"Sep","y":7187.8294297494,"grp":"D"},{"x":"Nov","y":4242.24156490527,"grp":"D"},{"x":"May","y":8649.29947070777,"grp":"D"},{"x":"Oct","y":9913.90693280846,"grp":"D"},{"x":"Jul","y":2064.99585579149,"grp":"D"},{"x":"Jul","y":2139.0605608467,"grp":"D"},{"x":"Sep","y":6128.36296251044,"grp":"D"},{"x":"Mar","y":1362.2413338162,"grp":"D"},{"x":"Jun","y":9566.24378217384,"grp":"D"},{"x":"Feb","y":9279.15707952343,"grp":"D"},{"x":"Jul","y":2576.64136146195,"grp":"D"},{"x":"Dec","y":3800.77436915599,"grp":"D"},{"x":"Feb","y":6866.118197795,"grp":"D"},{"x":"Mar","y":2121.03258329444,"grp":"D"},{"x":"Apr","y":3866.18349980563,"grp":"D"},{"x":"Feb","y":1147.24097028375,"grp":"D"},{"x":"Feb","y":2468.4996183496,"grp":"D"},{"x":"Sep","y":5915.8891371917,"grp":"D"},{"x":"May","y":5091.79887222126,"grp":"D"},{"x":"Apr","y":2925.9389413055,"grp":"D"},{"x":"Feb","y":6491.72044103034,"grp":"D"},{"x":"Apr","y":3079.23380611464,"grp":"D"},{"x":"Jun","y":5035.22786544636,"grp":"D"},{"x":"May","y":5584.19114421122,"grp":"D"},{"x":"Mar","y":8988.11149923131,"grp":"D"},{"x":"Mar","y":4062.7092581708,"grp":"D"},{"x":"Jun","y":9537.83924109302,"grp":"D"},{"x":"Oct","y":4800.73384172283,"grp":"D"},{"x":"Feb","y":8213.33517460153,"grp":"D"},{"x":"May","y":4075.3910378553,"grp":"D"},{"x":"May","y":2426.38735263608,"grp":"D"},{"x":"Dec","y":3918.78785053268,"grp":"D"},{"x":"May","y":7867.72392014973,"grp":"D"},{"x":"Jan","y":9243.83745365776,"grp":"D"},{"x":"May","y":8782.40388352424,"grp":"D"},{"x":"Mar","y":3321.15667290054,"grp":"D"},{"x":"Aug","y":8670.11037212797,"grp":"D"},{"x":"Nov","y":6688.02580982447,"grp":"D"},{"x":"Oct","y":6678.00529906526,"grp":"D"},{"x":"May","y":4766.77681994624,"grp":"D"},{"x":"Oct","y":9564.62304061279,"grp":"D"},{"x":"Apr","y":6860.423641745,"grp":"D"},{"x":"Sep","y":7068.63693310879,"grp":"D"},{"x":"Jul","y":1349.96092156507,"grp":"D"},{"x":"Jan","y":7875.28039235622,"grp":"D"},{"x":"Feb","y":2223.92260935158,"grp":"D"},{"x":"May","y":9991.39028508216,"grp":"D"},{"x":"Mar","y":7029.32930458337,"grp":"D"},{"x":"Nov","y":4867.0726553537,"grp":"D"},{"x":"Jul","y":4068.52117134258,"grp":"D"},{"x":"Jan","y":6438.71706351638,"grp":"E"},{"x":"Mar","y":2818.3984614443,"grp":"E"},{"x":"Sep","y":1807.29228560813,"grp":"E"},{"x":"Aug","y":3238.73151186854,"grp":"E"},{"x":"May","y":9982.55998571403,"grp":"E"},{"x":"Oct","y":3248.16200160421,"grp":"E"},{"x":"Oct","y":6944.5791922044,"grp":"E"},{"x":"Nov","y":1432.2255125735,"grp":"E"},{"x":"Apr","y":7893.07527546771,"grp":"E"},{"x":"Jun","y":3348.63926121034,"grp":"E"},{"x":"Apr","y":5466.57093963586,"grp":"E"},{"x":"Mar","y":4979.60591013543,"grp":"E"},{"x":"Aug","y":3826.14627061412,"grp":"E"},{"x":"Sep","y":6696.06011128053,"grp":"E"},{"x":"Mar","y":6468.98293192498,"grp":"E"},{"x":"Oct","y":7731.59319604747,"grp":"E"},{"x":"Jan","y":9563.32546332851,"grp":"E"},{"x":"Feb","y":5618.15632996149,"grp":"E"},{"x":"Jul","y":6923.82505722344,"grp":"E"},{"x":"Mar","y":3197.95992318541,"grp":"E"},{"x":"Feb","y":7741.89025303349,"grp":"E"},{"x":"May","y":2585.14982718043,"grp":"E"},{"x":"Jul","y":8796.67890793644,"grp":"E"},{"x":"Apr","y":6986.61696375348,"grp":"E"},{"x":"Apr","y":7314.90188557655,"grp":"E"},{"x":"Jun","y":8743.39598137885,"grp":"E"},{"x":"Jun","y":4000.10647252202,"grp":"E"},{"x":"Sep","y":8990.75417919084,"grp":"E"},{"x":"Aug","y":8020.47651773319,"grp":"E"},{"x":"Apr","y":5541.73413291574,"grp":"E"},{"x":"May","y":4710.73773712851,"grp":"E"},{"x":"Jul","y":7750.63904258423,"grp":"E"},{"x":"Jun","y":2334.4664236065,"grp":"E"},{"x":"Feb","y":3647.38699328154,"grp":"E"},{"x":"Apr","y":7349.00843421929,"grp":"E"},{"x":"Jun","y":3507.16277188621,"grp":"E"},{"x":"Feb","y":2368.49797307514,"grp":"E"},{"x":"Nov","y":5467.1879671514,"grp":"E"},{"x":"Jul","y":4197.78636028059,"grp":"E"},{"x":"Sep","y":6573.91057978384,"grp":"E"},{"x":"Apr","y":4774.74086848088,"grp":"E"},{"x":"Sep","y":4407.78357628733,"grp":"E"},{"x":"Apr","y":6114.4388737157,"grp":"E"},{"x":"Feb","y":3018.24092213064,"grp":"E"},{"x":"Jun","y":1495.08576514199,"grp":"E"},{"x":"Oct","y":4333.86286813766,"grp":"E"},{"x":"Jan","y":6443.03558766842,"grp":"E"},{"x":"Aug","y":8408.15271367319,"grp":"E"},{"x":"Apr","y":5326.1944714468,"grp":"E"},{"x":"Nov","y":2086.8522990495,"grp":"E"},{"x":"Jun","y":2645.84622648545,"grp":"E"},{"x":"Sep","y":3047.05429263413,"grp":"E"},{"x":"Dec","y":5488.59726311639,"grp":"E"},{"x":"Jan","y":5411.74325556494,"grp":"E"},{"x":"Apr","y":8956.64951018989,"grp":"E"},{"x":"Mar","y":1378.84556129575,"grp":"E"},{"x":"Apr","y":7301.0421928484,"grp":"E"},{"x":"Aug","y":7462.28567929938,"grp":"E"},{"x":"Aug","y":5033.78769522533,"grp":"E"},{"x":"Feb","y":3372.54568329081,"grp":"E"},{"x":"Apr","y":5329.52160504647,"grp":"E"},{"x":"Jan","y":7329.46872594766,"grp":"E"},{"x":"Dec","y":9067.80732399784,"grp":"E"},{"x":"Oct","y":2549.0306369029,"grp":"E"},{"x":"Jun","y":4934.64410118759,"grp":"E"},{"x":"Aug","y":8415.049926145,"grp":"E"},{"x":"Feb","y":9676.97431170382,"grp":"E"},{"x":"Jun","y":1178.17199928686,"grp":"E"},{"x":"Aug","y":8295.39294005372,"grp":"E"},{"x":"Jun","y":9022.69349247217,"grp":"E"},{"x":"Sep","y":2359.25290570594,"grp":"E"},{"x":"Oct","y":4474.2368364241,"grp":"E"},{"x":"Oct","y":9533.45381468534,"grp":"E"},{"x":"Sep","y":1648.48128613085,"grp":"E"},{"x":"Oct","y":5183.80320956931,"grp":"E"},{"x":"May","y":3710.04532370716,"grp":"E"},{"x":"Jun","y":1247.47792701237,"grp":"E"},{"x":"Dec","y":1693.05749400519,"grp":"E"},{"x":"May","y":7567.23988102749,"grp":"E"},{"x":"Mar","y":3656.29980829544,"grp":"E"},{"x":"Feb","y":4568.55397135951,"grp":"E"},{"x":"Aug","y":9225.07140552625,"grp":"E"},{"x":"Jun","y":2568.61054268666,"grp":"E"},{"x":"Apr","y":1997.2243506927,"grp":"E"},{"x":"May","y":4827.35126256011,"grp":"E"},{"x":"Sep","y":4715.36438213661,"grp":"E"},{"x":"Aug","y":6680.59477908537,"grp":"E"},{"x":"May","y":2634.1360937804,"grp":"E"},{"x":"May","y":3838.78474519588,"grp":"E"},{"x":"Mar","y":2183.80222539417,"grp":"E"},{"x":"Jan","y":8599.27877248265,"grp":"E"},{"x":"Oct","y":3929.60479925387,"grp":"E"},{"x":"Apr","y":3710.86713369004,"grp":"E"},{"x":"Sep","y":1519.32577649131,"grp":"E"},{"x":"Aug","y":7390.85783297196,"grp":"E"},{"x":"Nov","y":5521.35539613664,"grp":"E"},{"x":"Nov","y":3083.70457496494,"grp":"E"},{"x":"Aug","y":9869.16523892432,"grp":"E"},{"x":"Feb","y":8256.22580898926,"grp":"E"},{"x":"Apr","y":2142.00896024704,"grp":"E"},{"x":"May","y":3221.90718818456,"grp":"E"},{"x":"Jul","y":6527.62525994331,"grp":"E"},{"x":"Feb","y":3239.41580415703,"grp":"E"},{"x":"Feb","y":6197.1469973214,"grp":"E"},{"x":"Dec","y":9051.16790928878,"grp":"E"},{"x":"Feb","y":2605.92910577543,"grp":"E"},{"x":"Jun","y":7637.51068105921,"grp":"E"},{"x":"Jul","y":4986.55090364628,"grp":"E"},{"x":"Oct","y":5880.38300769404,"grp":"E"},{"x":"Apr","y":6933.98572597653,"grp":"E"},{"x":"Jul","y":6763.99584929459,"grp":"E"},{"x":"Sep","y":3737.69355937839,"grp":"E"},{"x":"Nov","y":9327.77811517008,"grp":"E"},{"x":"Jul","y":5888.21807759814,"grp":"E"},{"x":"Oct","y":2796.95831798017,"grp":"E"},{"x":"Mar","y":8552.45814239606,"grp":"E"},{"x":"Nov","y":1618.71742876247,"grp":"E"},{"x":"Nov","y":3441.05239654891,"grp":"E"},{"x":"Apr","y":4946.57888147049,"grp":"E"},{"x":"Nov","y":4457.96173275448,"grp":"E"},{"x":"Sep","y":9086.85346390121,"grp":"E"},{"x":"Apr","y":1463.82857114077,"grp":"E"},{"x":"Jun","y":7725.31472309493,"grp":"E"},{"x":"Dec","y":3405.09329433553,"grp":"E"},{"x":"May","y":3790.53716314957,"grp":"E"},{"x":"Nov","y":5738.67150978185,"grp":"E"},{"x":"Jan","y":3325.22228150629,"grp":"E"},{"x":"May","y":8057.45212687179,"grp":"E"},{"x":"May","y":8321.92606199533,"grp":"E"},{"x":"Feb","y":2031.99796471745,"grp":"E"},{"x":"Jun","y":6870.78093318269,"grp":"E"},{"x":"Sep","y":2502.22835270688,"grp":"E"},{"x":"Mar","y":8091.64669597521,"grp":"E"},{"x":"Jun","y":5290.59446463361,"grp":"E"},{"x":"Jul","y":3699.89731791429,"grp":"E"},{"x":"Apr","y":9888.35235824808,"grp":"E"},{"x":"May","y":8922.2765553277,"grp":"E"},{"x":"Jan","y":8698.14995466731,"grp":"E"},{"x":"Feb","y":6519.24047339708,"grp":"E"},{"x":"Jul","y":7029.16274988092,"grp":"E"},{"x":"Dec","y":9867.30833724141,"grp":"E"},{"x":"Jan","y":8065.70069701411,"grp":"E"},{"x":"Jan","y":1479.81899604201,"grp":"E"},{"x":"Jul","y":5786.08391270973,"grp":"E"},{"x":"Jan","y":6982.02784871683,"grp":"E"},{"x":"May","y":8347.87692455575,"grp":"E"},{"x":"Mar","y":9134.09687508829,"grp":"E"},{"x":"Apr","y":6463.13437097706,"grp":"E"},{"x":"Aug","y":9648.42986618169,"grp":"E"},{"x":"Jun","y":1310.096567031,"grp":"E"},{"x":"Aug","y":3082.38063030876,"grp":"E"},{"x":"Nov","y":4255.75367896818,"grp":"E"},{"x":"Mar","y":7611.24646733515,"grp":"E"},{"x":"May","y":3912.54578647204,"grp":"E"},{"x":"Feb","y":7998.35977447219,"grp":"E"},{"x":"Jan","y":6692.03519471921,"grp":"E"},{"x":"Sep","y":3863.90231875703,"grp":"E"},{"x":"Nov","y":7969.32319598272,"grp":"E"},{"x":"May","y":1223.38121267967,"grp":"E"},{"x":"Apr","y":7314.06913721003,"grp":"E"},{"x":"Mar","y":8202.30460050516,"grp":"E"},{"x":"Oct","y":9098.17388211377,"grp":"E"},{"x":"Jun","y":2061.13342032768,"grp":"E"},{"x":"Nov","y":7695.7689251285,"grp":"E"},{"x":"Jun","y":8578.92439560965,"grp":"E"},{"x":"Dec","y":7865.04013952799,"grp":"E"},{"x":"Mar","y":7564.5765690133,"grp":"E"},{"x":"Aug","y":3628.22006386705,"grp":"E"},{"x":"Nov","y":4665.83923040889,"grp":"E"},{"x":"Oct","y":2756.14414713345,"grp":"E"},{"x":"Apr","y":3198.39766388759,"grp":"E"},{"x":"Nov","y":9785.23921850137,"grp":"E"},{"x":"Feb","y":8572.53883546218,"grp":"E"},{"x":"Oct","y":4028.03643234074,"grp":"E"},{"x":"Feb","y":3669.32555823587,"grp":"E"},{"x":"May","y":2760.35243459046,"grp":"E"},{"x":"Apr","y":6290.32381623983,"grp":"E"},{"x":"Feb","y":1946.66445930488,"grp":"E"},{"x":"Apr","y":1476.23889660463,"grp":"E"},{"x":"Nov","y":9638.45121464692,"grp":"E"},{"x":"Jan","y":1142.79208448716,"grp":"E"},{"x":"Nov","y":7569.02639148757,"grp":"E"},{"x":"Nov","y":4131.55799079686,"grp":"E"},{"x":"Sep","y":8205.89173235931,"grp":"E"},{"x":"Feb","y":3772.85684179515,"grp":"E"},{"x":"Dec","y":4651.16342739202,"grp":"E"},{"x":"Feb","y":7977.62158187106,"grp":"E"},{"x":"May","y":3850.88119353168,"grp":"E"},{"x":"Jun","y":1464.61197105236,"grp":"E"},{"x":"Jan","y":2024.08253960311,"grp":"E"},{"x":"May","y":5328.76392500475,"grp":"E"},{"x":"May","y":3273.08394364081,"grp":"E"},{"x":"Mar","y":3663.32340519875,"grp":"E"},{"x":"Sep","y":8620.35096716136,"grp":"E"},{"x":"May","y":7925.3975180909,"grp":"E"},{"x":"Jan","y":4895.93324111775,"grp":"E"},{"x":"May","y":4222.68356732093,"grp":"E"},{"x":"Sep","y":9675.88713485748,"grp":"E"},{"x":"May","y":6546.37609492056,"grp":"E"},{"x":"Feb","y":1104.40582619049,"grp":"E"}];
  
  return drawChart(opts,data);
  
  function drawChart(opts, data){ 
    var subCharts = [];
    
    var c = null;
    var assignedColors = {};
    
      //move this to top or make function since duplicated
    //allow manipulation of default colors to use with dimple
    if(opts.defaultColors.length) {
      defaultColorsArray = [];
      if (typeof(opts.defaultColors) == "function") {
        //assume this is a d3 scale
        //if there is a domain for the color scale given
        //then we will need to assign colors with dimples assignColor
        if( opts.defaultColors.domain().length > 0 ){
          defaultColorsArray = opts.defaultColors.range();
          opts.defaultColors.domain().forEach( function( d, i ) {
            assignedColors[d] = new dimple.color(opts.defaultColors.range()[i])
          })
        } else {
          for (var n=0;n<opts.defaultColors.range().length;n++) {
            defaultColorsArray.push(opts.defaultColors(n));
          };
        }
      } else {
        defaultColorsArray = opts.defaultColors;
      }
  
      
      //if colors not assigned with no keys and opts.groups
      if (!(Object.keys(assignedColors).length) & Boolean(opts.groups)) {
        //let's just assign colors in order with each unique
        //this is important if facetting where need colors assigned
        //if not in all pairs
        opts.groups = (typeof opts.groups == "string") ? [opts.groups] : opts.groups;
        d3.set(
          data.map(function(d){
            //dimple colors by last item in groups
            return d[opts.groups[opts.groups.length-1]]
          })
        ).values().forEach(function(u,i){
          //u will be our uniqe and will pick color from defaultColorsArray
          //console.log([u,defaultColorsArray[i]].concat());
          assignedColors[u] = new dimple.color(defaultColorsArray[i % defaultColorsArray.length])
        })
      }
    }
  
    
    //do series
    //set up a function since same for each
    //as of now we have x,y,groups,data,type in opts for primary layer
    //and other layers reside in opts.layers
    function buildSeries(layer, hidden, myChart){
      //inherit from primary layer if not intentionally changed or xAxis, yAxis, zAxis null
      if (!layer.xAxis) layer.xAxis = opts.xAxis;    
      if (!layer.yAxis) layer.yAxis = opts.yAxis;
      if (!layer.zAxis) layer.zAxis = opts.zAxis;
      
      var x = buildAxis("x", layer, myChart);
      x.hidden = hidden;
      
      var y = buildAxis("y", layer, myChart);
      y.hidden = hidden;
      
      //z for bubbles
      var z = null;
      if (!(typeof(layer.zAxis) === 'undefined') && layer.zAxis.type){
        z = buildAxis("z", layer, myChart);
      };
      
      //here think I need to evaluate group and if missing do null
      //as the group argument
      //if provided need to use groups from layer
      var s = new dimple.series(myChart, null, x, y, z, c, dimple.plot[layer.type], dimple.aggregateMethod.avg, dimple.plot[layer.type].stacked);
      
      //as of v1.1.4 dimple can use different dataset for each series
      if(layer.data){
        //convert to an array of objects
        var tempdata;
        //avoid lodash for now
        datakeys = d3.keys(layer.data)
        tempdata = layer.data[datakeys[1]].map(function(d,i){
          var tempobj = {}
          datakeys.forEach(function(key){
            tempobj[key] = layer.data[key][i]
          })
          return tempobj
        })
        s.data = tempdata;
      }
      
      if(layer.hasOwnProperty("groups")) {
        s.categoryFields = (typeof layer.groups === "object") ? layer.groups : [layer.groups];
        //series offers an aggregate method that we will also need to check if available
        //options available are avg, count, max, min, sum
      }
      if (!(typeof(layer.aggregate) === 'undefined')) {
        s.aggregate = eval(layer.aggregate);
      }
      if (!(typeof(layer.lineWeight) === 'undefined')) {
        s.lineWeight = layer.lineWeight;
      }
      if (!(typeof(layer.barGap) === 'undefined')) {
        s.barGap = layer.barGap;
      }    
      if (!(typeof(layer.interpolation) === 'undefined')) {
        s.interpolation = layer.interpolation;
      }     
     /* if (!(typeof(layer.eventHandler) === 'undefined')) {
        layer.eventHandler = (layer.eventHandler.length === "undefined") ? layer.eventHandler : [layer.eventHandler];
        layer.eventHandler.forEach(function(evt){
          s.addEventHandler(evt.event, eval(evt.handler))
        })
      }*/
        
      myChart.series.push(s);
      
      /*placeholder fix domain of primary scale for new series data
      //not working right now but something like this
      //for now just use overrideMin and overrideMax from rCharts
      for( var i = 0; i<2; i++) {
        if (!myChart.axes[i].overrideMin) {
          myChart.series[0]._axisBounds(i==0?"x":"y").min = myChart.series[0]._axisBounds(i==0?"x":"y").min < s._axisBounds(i==0?"x":"y").min ? myChart.series[0]._axisBounds(i==0?"x":"y").min : s._axisBounds(i==0?"x":"y").min;
        }
        if (!myChart.axes[i].overrideMax) {  
          myChart.series[0]._axisBounds(i==0?"x":"y")._max = myChart.series[0]._axisBounds(i==0?"x":"y").max > s._axisBounds(i==0?"x":"y").max ? myChart.series[0]._axisBounds(i==0?"x":"y").max : s._axisBounds(i==0?"x":"y").max;
        }
        myChart.axes[i]._update();
      }
      */
      
      return myChart;
    };
  
      
    //function to build axes
    function buildAxis(position, layer, myChart){
      var axis;
      var axisopts = opts[position+"Axis"];
      
      if(axisopts.measure) {
        axis = myChart[axisopts.type](position,layer[position],axisopts.measure);
      } else {
        axis = myChart[axisopts.type](position, layer[position]);
      };
      if(!(axisopts.type === "addPctAxis")) axis.showPercent = axisopts.showPercent;
      if (axisopts.orderRule) axis.addOrderRule(axisopts.orderRule);
      if (axisopts.grouporderRule) axis.addGroupOrderRule(axisopts.grouporderRule);  
      if (axisopts.overrideMin) axis.overrideMin = axisopts.overrideMin;
      if (axisopts.overrideMax) axis.overrideMax = axisopts.overrideMax;
      if (axisopts.overrideMax) axis.overrideMax = axisopts.overrideMax;
      if (axisopts.inputFormat) axis.dateParseFormat = axisopts.inputFormat;
      if (axisopts.outputFormat) axis.tickFormat = axisopts.outputFormat;    
      return axis;
    };
        
        
  
    //if facet not provided for x or y make Dummy variable
    //handle NULL facet
    if (typeof opts.facet == "undefined") opts.facet = {}
    opts.facet.x = opts.facet.x ? opts.facet.x : "Dummy"
    opts.facet.y = opts.facet.y ? opts.facet.y : "Dummy"    
    if(opts.facet.x === "Dummy" || opts.facet.y === "Dummy") {
      data.forEach(function(d){
        d.Dummy = 1;
      })
    }
  
    var rows = d3.set(data.map(function(d){return d[opts.facet.y]})).values();
    var nrow = opts.facet.nrow ? opts.facet.nrow : rows.length;
    var cols = d3.set(data.map(function(d){return d[opts.facet.x]})).values()
    var ncol = opts.facet.ncol ? opts.facet.ncol : cols.length;
    
    var tuples = d3.merge(rows.map(function(row,irow){return cols.map(function(col,icol){return {key:row + "~" + col, values: {"row":irow, "col":icol} }})}))
      
    var grid = d3.layout.grid()
      .rows( nrow )
      .cols( ncol )
      .size([ opts.width, opts.height-100])
      .bands();
    
    var svgGrid = d3.select("#" + opts.id).append("svg")
      .attr("width", opts.width)
      .attr("height", opts.height);
     // .attr("transform", "translate(50,0)");
  
    grid(tuples);
  
  /* var cells = d3.select("#" + opts.id).selectAll("svg")
      .data(grid(tuples))
      .enter()
        .append("svg")
          .attr("class", "cell")
          .attr("id", function(d) {
            return d.key;
          })
          .attr("transform", function(d, i) {
             return "translate(" + d.x + "," + d.y + ")"
           })
          .attr("width", grid.nodeSize()[0])
          .attr("height", grid.nodeSize()[1]);
  
    var color = d3.scale.linear()
      .domain([0, 3, 6])
      .range(["red", "lightgray", "green"]);
      
  /*  cells.selectAll("rect")
      .data(function(d){
        return [d];
      })
        .enter().append("rect")
          .attr("width", grid.nodeSize()[0])
          .attr("height", grid.nodeSize()[1])
          .style("fill", function(d) {return color(d.values.row)});         
  */
      tuples.forEach(function(cell,cellnum) {
          //cell = d3.select(cell);
      
          // Filter the data set for the quarter and the price tier
          // of the current shape
          var filteredData = dimple.filterData(data, opts.facet.x, cell.key.split('~')[1]);
          filteredData = dimple.filterData(filteredData, opts.facet.y, cell.key.split('~')[0]);    
          
          // Draw a new chart which will go in the current shape
          var subChart = new dimple.chart(svgGrid, filteredData);
  
          if (tuples.length > 1){
            // Position the chart inside the shape
            subChart.height = grid.nodeSize()[1]
            subChart.width = grid.nodeSize()[0]      
            
            if (opts.margins) {
              subChart.setBounds(
                parseFloat(cell.x + opts.margins.left),
                parseFloat(cell.y + opts.margins.top),
                subChart.width - opts.margins.right- opts.margins.left,
                subChart.height - opts.margins.top - opts.margins.bottom
              )
            } else {
              subChart.setBounds(
                parseFloat(cell.x + 50), 
                parseFloat(cell.y + 10),
                parseFloat(grid.nodeSize()[0] - 50),
                parseFloat(grid.nodeSize()[1]) - 10
              );
            }  
          } else { //only one chart
            if (opts.bounds) {
              subChart.setBounds(opts.bounds.x, opts.bounds.y, opts.bounds.width, opts.bounds.height);//myChart.setBounds(80, 30, 480, 330);
            }
          }
          
            //dimple allows use of custom CSS with noFormats
            if(opts.noFormats) { subChart.noFormats = opts.noFormats; };
            
            //need to fix later for better colorAxis support
            if(d3.keys(opts.colorAxis).length > 0) {
              c = subChart[opts.colorAxis.type](opts.colorAxis.colorSeries,opts.colorAxis.palette) ;
              if(opts.colorAxis.outputFormat){
                c.tickFormat = opts.colorAxis.outputFormat;
              }
            }
          
            //add the colors from the array into the chart's defaultColors
            if (typeof defaultColorsArray != "undefined"){
              subChart.defaultColors = defaultColorsArray.map(function(d) {
                return new dimple.color(d);
              });          
            }
            subChart._assignedColors = assignedColors;
            
            subChart = buildSeries(opts, false, subChart);
            if (opts.layers.length > 0) {
              opts.layers.forEach(function(layer){
                subChart = buildSeries(layer, true, subChart);
              })
            }
          
            //unsure if this is best but if legend is provided (not empty) then evaluate
            if(d3.keys(opts.legend).length > 0) {
              var l =subChart.addLegend();
              d3.keys(opts.legend).forEach(function(d){
                l[d] = opts.legend[d];
              });
            }
            //quick way to get this going but need to make this cleaner
            if(opts.storyboard) {
              subChart.setStoryboard(opts.storyboard);
            };
            
            //catch all for other options
            //these can be provided by dMyChart$chart( ... )
              
            
            //add facet row and column in case we need later
            subChart.facetposition = cell.values;
            
            subCharts.push(subChart);
          })
  
      subCharts.forEach(function(subChart) {
        subChart.draw();
      })
    
    //get rid of all y for those not in column 1
    //can easily customize this to only remove bits and pieces
    if(opts.facet.removeAxes) {
      ["x","y","z"].forEach(function(position){
        //work on axis scaling
        //assume if remove then same scales for all charts
        axisdomain = [];      
        subCharts.forEach(function(subChart){
          subChart.axes.forEach(function(axis){
            if (axis.position === position && !axis._hasCategories()){
              axisdomain.push(axis._scale.domain())
            }
          })
        });
        axisdomain = d3.extent([].concat.apply([], axisdomain));
        subCharts.forEach(function(subChart){
          subChart.axes.forEach(function(axis){
            if (axis.position === position && !axis._hasCategories()){
              axis.overrideMin = axisdomain[0];
              axis.overrideMax = axisdomain[1];
            }
          })
          subChart.draw(null,true)
        });
      })
      
      //evaluate which do not fall in column 1 or row 1 to remove
      var xpos = d3.extent(subCharts,function(d){return d.x});
      var ypos = d3.extent(subCharts,function(d){return d.y});    
      subCharts.filter(function(d){
        return d.x!=xpos[0];
      }).forEach(function(d){
        d.series[0]._dropLineOrigin = function(){
          return {"x" : xpos[0],"y" : ypos[1] + d._heightPixels()}
        }
        d.axes.forEach(function(axis){
          if (axis.position === "y"){
            //leave there for reference but set opacity 0
            if (axis.shapes) axis.shapes.style("opacity",0);
            if (axis.titleShape) axis.titleShape.style("opacity",0);
          }
        })
      });
      //now x for those not in row 1
      subCharts.filter(function(d){
        return d.y!=ypos[1];
      }).forEach(function(d){
        d.series[0]._dropLineOrigin = function(){
          return {"x" : xpos[0],"y" : ypos[1] + d._heightPixels()}
        }        
        d.axes.forEach(function(axis){
          if (axis.position === "x"){
            //leave there for reference but set opacity 0
            if (axis.shapes) axis.shapes.style("opacity",0);
            if (axis.titleShape) axis.titleShape.style("opacity",0);
          }
        })
      });
    }
  return subCharts;
  }
})();
</script>

<script>
  function updateChartColors( colors ){
    var dcolors = colors.map(function(col){
      return new dimple.color(col);
    })
    chart2b8c50b34794.forEach(function(cht){
      Object.keys(cht._assignedColors).forEach(function(k,i){
        cht._assignedColors[k] = dcolors[i % dcolors.length];
      })
      cht.defaultColors = dcolors;
      cht.draw();
    })
  }
</script></div>
      </div>
    </div>
    <script>
              d3.selectAll("input").on("change",function(){
                updateColors(  );
              });

              d3.selectAll("#scheme_buttons li a").on("click",function(){
                var selText = $(this).text();
               $(this).parents(".btn-group").find(".dropdown-toggle").html(selText+" <span class='caret'></span>");
               updateColors( );
              })

              d3.selectAll("#variation_buttons li a").on("click",function(){
                var selText = $(this).text();
               $(this).parents(".btn-group").find(".dropdown-toggle").html(selText+" <span class='caret'></span>");
               updateColors( );
              })

              ColorPicker(
                document.getElementById("slide"),
                document.getElementById("picker"),
                function(hex, hsv, rgb) {
                  document.getElementById("color_row").style.backgroundColor = chroma.hex(hex).css();
                  d3.selectAll("#slide,#picker").datum([hex,hsv,rgb]);
                  updateColors( );
                });
               
              function updateColors( ) {
                var hex = d3.selectAll("#slide,#picker").datum()[0];
                var hue = d3.selectAll("#slide,#picker").datum()[1].h;

                colors = (new ColorScheme).from_hue( hue ) //chroma.hex(hex).hsv()[0] )
                  //.from_hex( hex.replace("#", "" ).toUpperCase() )
                  .scheme(d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,""))
                  .variation(d3.select("#variation_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,""))
                  .colors().map(function(col){return "#" + col})

                if (d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,"") != "monochromatic")  colors.splice(0,0,hex);

                if (d3.select("#bez").node().checked){
                  if( d3.select("#scheme_selection").text().toLowerCase().replace(/[ \t\r\n]+/g,"") != "monochromatic"){
                    //if not monochromatic then will pick 0,3,4,...,length-1
                      colors = colors.filter(function(col,i){
                        if( (colors.length < 9 && i % 4 < 2 ) || (colors.length >= 9 && i % 4 === 0) ) { //|| i % 4 === 3 ) {
                          return col;
                        }
                      })
                  }
                  colors = chroma.interpolate.bezier( colors )
                }

                var scale = chroma.scale(colors)
                    .domain([0,+d3.select("#steps")[0][0].value],d3.select("#steps")[0][0].value)
                    .correctLightness( d3.select("#coL").node().checked );

                colors = d3.range(0,d3.select("#steps")[0][0].value,1)
                  .map(function(d){return scale(d).hex()});
                  

                var palette = d3.selectAll("#palette").selectAll("div").data(colors);

                palette
                  .enter()
                    .append("div")
                palette
                  .exit().remove();
                
                palette
                  .style("display", "inline-block")
                  .style("width",d3.format(".4%")(1/colors.length))
                  .style("height",d3.select("#picker").style("height"))
                  .style("background",function(d){return d;})

                updateChartColors(colors);
              }
        </script>
  </body>
</html> 